(function(){if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var e=Array.prototype.slice.call(arguments,1),f=function(){if(this instanceof f){var g=function(){};g.prototype=b.prototype;var g=new g,h=b.apply(g,e.concat(Array.prototype.slice.call(arguments)));return Object(h)===h?h:g}else return b.apply(a,e.concat(Array.prototype.slice.call(arguments)))};return f};var a=Function.prototype.call.bind(Object.prototype.toString);if(!Array.isArray)Array.isArray=
function(b){return a(b)=="[object Array]"};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){var d;if(this==null)throw new TypeError;d=b&&typeof this=="string"&&this?this.split(""):Object(this);var e=d.length>>>0;if(!e)return-1;var f=0;arguments.length>1&&(f=arguments[1],f=+f,f!==f?f=0:f!==0&&f!==1/0&&f!==-(1/0)&&(f=(f>0||-1)*Math.floor(Math.abs(f))));for(f=f>=0?f:Math.max(0,e+f);f<e;f++)if(f in d&&d[f]===a)return f;return-1};var b="a"[0]!="a";String.prototype.inArray=function(a){for(var b=
a.length-1;b>=0;b--)if(a[b]==this.toString())return true;return false}})();var GV=GV||{};GV.Ajax={};GV.Data={};GV.External={};GV.Tasks={};GV.Utils={};
GV.applicationConfig={flashPlayerUrl:"http://player.goviral-content.com/player.php",flashPlayerSkinPath:"http://player.goviral-content.com/assets/latest/",flashPlayerPluginPath:"http://player.goviral-content.com/modules/",flashPlayerPlaylistPath:"http://s.srvntrk.com/handler/staticPlaylist",previewFlashPlayerPingUrl:"http://sp-work.goviral-content.com/handler/preview-tracking",flashPlayerVersion:"2.3.5",minFlashVersion:"9",htmlPlayerVersion:"1",elementAttributeName:"data-gv-player",serviceRequestTimeout:"10000",
serveandtrackPlaylistUrl:"http://s.srvntrk.com/handler/dynamicPlaylist?cw={{cw}}&videoID={{videoId}}&format={{requestType}}&fallback=1",serveandtrackPlaylistCallbackName:"callback",serveandtrackPingUrl:"http://s.srvntrk.com/handler/img?v={{v}}&videoID={{videoID}}&cw={{cw}}&a={{a}}&type={{type}}&pID={{pID}}&psid={{psid}}&version={{version}}&playertype={{playertype}}&r={{r}}&s={{s}}&ts={{ts}}&dm={{deliveryMethod}}&dmv={{deliveryMethodVersion}}",blacklistServiceUrl:"http://player-services.goviral-content.com/blacklist/index/check?placementId={{placementId}}&placementUrl={{placementUrl}}&format={{requestType}}",
blacklistServiceCallbackName:"blacklistCallback",customTemplateServiceUrl:"http://player-services.goviral-content.com/template/index/find?contentId={{videoId}}&format={{requestType}}",customTemplateServiceCallbackName:"templateCallback",fallbackServiceUrl:"http://player-services.goviral-content.com/fallback/index/find?placementVersionId={{placementVersionId}}&format={{requestType}}",fallbackServiceCallbackName:"fallbackCallback",diagnosticsServiceUrl:"http://player-diagnostics.goviral.com/handler.php?sourceId=2&placementType={{placementType}}&placementUrl={{placementUrl}}&playlistLoadingTime=&ts={{ts}}&cw={{cw}}&pID={{pID}}&aspect=&error={{error}}&errorMsg={{errorMsg}}&videoID={{videoID}}&height=&width=&memory=&version={{version}}&userAgent={{userAgent}}"};
if("https:"==document.location.protocol)for(p in GV.applicationConfig)if(GV.applicationConfig.hasOwnProperty(p)&&/^http\:/.test(GV.applicationConfig[p])&&(GV.applicationConfig[p]=GV.applicationConfig[p].replace(/^http\:/,"https:"),p.inArray(["flashPlayerUrl","flashPlayerSkinPath","flashPlayerPluginPath"]))){window.console&&console.log("will change domain for:",p);var url=GV.applicationConfig[p],tld=document.location.host.replace(/^.*?\./,""),url=url.replace(/goviral\-content\.com/,tld);GV.applicationConfig[p]=
url}GV.Data.Clickthrough=function(a,b,c){this.url=a;this.target=b;this.isActive=c};GV.Data.Environment=function(){this.placement=new GV.Data.Placement;this.view=new GV.Data.View;this.videos=[];this.playlist={}};GV.Data.GoviralTrackingEvent=function(a,b){this.actionType=a;this.trackerIdValue=b;this.percentElapsed=void 0};GV.Data.PageStyle=function(a,b){this.backgroundColour=a;this.textColour=b};
GV.Data.Placement=function(a){this.contentWebsiteId=a;this.isBlacklisted=false;this.publisherSubId=this.placementVersionId=this.publisherId=this.fallbackBehaviour=void 0;this.pageStyle=new GV.Data.PageStyle;this.videoPlayerOptions=new GV.Data.VideoPlayerOptions};GV.Data.PlayerInfo=function(a,b){this.playerType=a;this.version=b};GV.Data.PlayerState=function(){this.video=void 0;this.percentElapsed=0};GV.Data.SponsoredBy=function(a,b,c){this.text=a;this.url=b;this.target=c};
GV.Data.Privacy={text:"Privacy",url:"http://www.goviral.com/privacy",target:"_blank"};GV.Data.TemplateElement=function(a,b){this.element=a;this.type=b};GV.Data.ThirdPartyTrackingEvent=function(a,b){this.actionType=a;this.urls=b};
GV.Data.Video=function(a,b,c){this.videoId=a;this.title=b;this.imageUrl=c;this.isPaying=this.campaignId=void 0;this.usesCustomTemplate=false;this.clickthrough=this.privacy=this.sponsoredBy=void 0;this.gvTrackingEvents=[];this.thirdPartyTrackingEvents=[];this.mp4Url=this.flvUrl=void 0};GV.Data.VideoPlayerOptions=function(){this.skin="light";this.autoHidePlayerChrome="false";this.windowMode="window"};
GV.ErrorCode={EMBED_CODE_INVALID:100,BLACKLIST_SERVICE_CALL_INVALID:110,BLACKLISTED:111,PLAYLIST_SERVICE_CALL_FAILED:120,PLAYLIST_SERVICE_CALL_INVALID:121,BROWSER_INCAPABLE_OF_PLAYING_VIDEOS:130,CUSTOM_TEMPLATE_SERVICE_CALL_FAILED:140,CUSTOM_TEMPLATE_SERVICE_CALL_INVALID:141,FALLBACK_HTML_SERVICE_CALL_FAILED:150,FALLBACK_HTML_SERVICE_CALL_INVALID:151};GV.Data.Error=function(a){this.code=a};GV.VideoFilters=function(a){this.filters=a};
GV.VideoFilters.prototype.filter=function(a,b){if(Array.isArray(this.filters)&&this.filters.length)for(var c=0,d=this.filters.length;c<d;c++)this.filters[c].filter(a);b(null,a)};GV.VideoShuffler=function(a){this.storage=a};GV.VideoShuffler.prototype._isValidStorage=function(){return this.storage&&typeof this.storage.getViewedVideos==="function"};GV.VideoShuffler.prototype._getVideoIdIndex=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return c;return null};
GV.VideoShuffler.prototype._compareVideos=function(a,b,c){return!b.isPaying&&c.isPaying?1:b.isPaying&&!c.isPaying?-1:(b=this._getVideoIdIndex(b.videoId,a),a=this._getVideoIdIndex(c.videoId,a),b==null&&a==null?0:b!=null&&a==null?1:b==null&&a!=null?-1:b>a?-1:1)};GV.VideoShuffler.prototype.filter=function(a){if(!a||!a.videos)throw Error("Shuffler needs an environment");if(this._isValidStorage(this.storage)){var b=this.storage.getViewedVideos();a.videos.sort(this._compareVideos.bind(this,b))}};
GV.Data.View=function(a,b){this.passOnReferrer=a;this.passOnSource=b;this.selectedVideoId=this.source=this.referrer=void 0;this.autoPlay=false};GV.LayoutElementType={PLAYER:"player",THUMBNAILS:"thumbnails",TITLE:"title",ERROR:"error",FALLBACK:"fallback"};GV.PlayerType={FLASH:1,HTML5:2,CUSTOM_TEMPLATE:3};GV.KizzyConfig={ns:"gv",viewedVideos:"viewedVideos"};GV.Storage=function(a,b){this.engine=a;this.config=b};
GV.Storage.prototype.getViewedVideos=function(){return this.engine.get(this.config.viewedVideos)||[]};GV.Storage.prototype.setViewedVideos=function(a){return this.engine.set(this.config.viewedVideos,a)};GV.Utils.Functions={curry:function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))}}};
GV.Utils.Event=function(){var a=[],b=function(a,b){var c=b?b:window.event;if(c.srcElement)c.target=c.srcElement;a.call(this,c)},c=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,false):a.detachEvent&&a.detachEvent("on"+b,c)};return{create:function(c,e,f){f=GV.Utils.Functions.curry(b,f);c.addEventListener?c.addEventListener(e,f,false):c.attachEvent&&c.attachEvent("on"+e,f);a.push({element:c,type:e,handler:f});return f},remove:c,removeAll:function(b,e){for(var f=a.length-1;f>=0;f--){var g=
a[f];g.element===b&&g.type===e&&(c(b,e,g.handler),a.splice(f,1))}}}}();GV.Utils.inherits=function(a,b){a.prototype=new b;a.prototype.constructor=a};GV.Utils.iOS=function(){return{iphone:Boolean(navigator.userAgent.toLowerCase().match(/(iphone)/)),ipad:Boolean(navigator.userAgent.toLowerCase().match(/(ipad)/)),ipod:Boolean(navigator.userAgent.toLowerCase().match(/(ipod)/)),ios:function(){return this.iphone||this.ipad||this.ipod}}}();
GV.Utils.isObservable=function(a){return Boolean(a&&typeof a.notifyObservers==="function"&&typeof a.registerObserver==="function")};GV.Utils.isObserver=function(a){return Boolean(a&&typeof a.notify==="function"&&typeof a.subscribe==="function")};
GV.Utils.makeObservable=function(){function a(a,b){if(this._observers&&a)for(var c=0;c<this._observers.length;c++)this._observers[c].notify.call(this._observers[c],this,a,b)}function b(a){GV.Utils.isObserver(a)&&this._observers&&this._observers.length!==0&&(a=this._observers.indexOf(a),a>-1&&this._observers.splice(a,1))}function c(a){if(GV.Utils.isObserver(a))this._observers=this._observers||[],this._observers.indexOf(a)===-1&&this._observers.push(a);else throw Error("Attempted to register invalid observer");
}return function(){this.notifyObservers=a;this.registerObserver=c;this.deregisterObserver=b;return this}}();
GV.Utils.makeObserver=function(){function a(a,b){if(!a||!b||typeof b!=="function")throw Error("Subscription needs an event type and a callback specified");else this._subscribers=this._subscribers||[],this._subscribers.push({type:a,callback:b})}function b(a,b,e){if(!GV.Utils.isObservable(a)||!b)throw Error("Notification of event was invalid");else if(this._subscribers)for(var f=0;f<this._subscribers.length;f++)if(this._subscribers[f].type===b){var g={source:a,type:b};if(e)g.data=e;this._subscribers[f].callback.call(this,
g)}}return function(){this.subscribe=a;this.notify=b;return this}}();
GV.Utils.QueryString=function(){return{appendParameters:function(a,b){if(typeof a!=="string"&&!a)throw Error("No URL supplied");else if(b){var c=a.indexOf("?")===-1,d=[a],e;for(e in b)b.hasOwnProperty(e)&&(d.push([c?"?":"&",encodeURIComponent(e),"=",encodeURIComponent(b[e])].join("")),c&&(c=false));return d.join("")}else return a},getParameters:function(a){if(a){var b={};if(a.indexOf("?")>-1&&(a=a.split("?")[1].split("&"))&&a.length)for(var c=0;c<a.length;c++){var d=a[c].split("="),e=decodeURIComponent(d[0]),
d=decodeURIComponent(d[1]);b[e]=d}return b}else throw Error("You must provide a URL to get query string parameters from");}}}();GV.Utils.SimpleObjectFactory=function(a){this.cacheInstances=a;this._objectDefinitions={};this._instances={}};GV.Utils.SimpleObjectFactory.prototype.addDefinition=function(a,b){typeof a!=="undefined"&&typeof b==="function"&&(this._objectDefinitions[a]=b)};
GV.Utils.SimpleObjectFactory.prototype.getInstance=function(a){return typeof a!=="undefined"&&this._objectDefinitions[a]?this.cacheInstances?(this._instances[a]||(this._instances[a]=this._objectDefinitions[a].call(void 0)),this._instances[a]):this._objectDefinitions[a].call(void 0):null};GV.Utils.StringFormatter=function(a,b){this.placeholderStart=a;this.placeholderEnd=b};
GV.Utils.StringFormatter.prototype.format=function(a,b){if(!a)return null;if(!b)return a;if(!this.placeholderEnd)this.placeholderEnd=this.placeholderStart||"}}";if(!this.placeholderStart)this.placeholderStart="{{";var c=a,d;for(d in b)if(b.hasOwnProperty(d)){var e=[this.placeholderStart,d,this.placeholderEnd].join("");c.indexOf(e)>-1&&(c=c.replace(e,b[d]))}return c};
GV.Utils.String=function(){return{formatTime:function(a){if(isNaN(a))return"0:00";var b=Math.floor(a/60),a=Math.ceil(a-b*60);a<10&&(a="0"+a);return b+":"+a}}}();GV.Utils.Url=function(){var a;return{getDomain:function(b){if(typeof b!=="string")return null;a||(a=/\:?\/\/([^\/\:?]+)/);b=a.exec(b);return!b||b.length!==2?null:b[1]}}}();
GV.Utils.Validators=function(){var a,b=["direct","opaque","transparent","window"],c;return{cssHexColour:function(b){if(!b)return false;a||(a=/^#?[A-Fa-f0-9]{3,6}$/);return a.test(b)},enumValue:function(a,b){if(!a||typeof a!=="object")return null;if(!b)return false;for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return true;return false},flashPlayerWindowMode:function(a){if(!a)return false;for(var c=0;c<b.length;c++)if(a===b[c])return true;return false},integer:function(a){return Boolean(a&&a.indexOf(".")===
-1&&!isNaN(parseInt(a,10)))},url:function(a){if(!a)return false;c||(c=/^([a-z]+)?:\/\/\/?[^\/\?#]+([\/][^\/\?#]*)*(\?[^&]*)?(&[^&]*)*(#.*)?$/);return c.test(a)}}}();
GV.Utils.Dom=function(){var a=function(a){function c(e,f){typeof e==="undefined"&&(e=true);for(typeof f==="undefined"&&(f=0);e;){var g=a[f];if(g){if(!g.type||g.type==="text/javascript"){var h=0,k=true,j=document.createElement("script");j.type="text/javascript";if(g.innerText||g.innerHTML||g.text)try{j.appendChild(document.createTextNode(g.text))}catch(w){j.text=g.text}else if(g.src)j.src=g.src,k=e=false,j.onload=j.onreadystatechange=function(){if(this.readyState&&this.readyState!=="complete"&&this.readyState!==
"loaded"||h)return false;this.onload=this.onreadystatechange=null;d.removeChild(this);e=true;h=1;c(e,f)};d.insertBefore(j,d.firstChild);k&&d.removeChild(j)}f++}else e=false}}var d=document.getElementsByTagName("head")[0]||document.documentElement;c()};return{createElement:function(a,c){if(typeof a!=="string"||!a)return null;var d=document.createElement(a);if(c)d.className=c;d.css=function(a){for(var b in a)try{var c=a[b];b==="float"&&(b=d.style.cssFloat?"styleFloat":"cssFloat");typeof c==="number"&&
(c+="px");d.style[b]=c}catch(h){}};return d},addClass:function(a,c){var d,e,f,g;if(c&&typeof c==="string"&&(d=c.split(/\s+/),a.nodeType===1))if(!a.className&&d.length===1)a.className=c;else{e=" "+a.className+" ";for(f=0,g=d.length;f<g;f++)~e.indexOf(" "+d[f]+" ")||(e+=d[f]+" ");a.className=e}},removeClass:function(a,c){var d,e,f,g;if(c&&typeof c==="string"||c===void 0)if(d=(c||"").split(/\s+/),a.nodeType===1&&a.className)if(c){e=(" "+a.className+" ").replace(/[\n\t\r]/g," ");for(f=0,g=d.length;f<
g;f++)e=e.replace(" "+d[f]+" "," ");a.className=e}else a.className=""},width:function(a){if(!a)return null;if(a&&typeof a==="object"&&"setInterval"in a){var c=a.document.documentElement.clientWidth;return a.document.compatMode==="CSS1Compat"&&c||a.document.body.clientWidth||c}else return a.nodeType===9?Math.max(a.documentElement.clientWidth,a.body.scrollWidth,a.documentElement.scrollWidth,a.body.offsetWidth,a.documentElement.offsetWidth):a.offsetWidth},getStyledWidth:function(a){if(!a)return null;
return typeof a.style!=="undefined"&&typeof a.style.width!=="undefined"&&(a=parseInt(a.style.width),!isNaN(a))?a:0},height:function(a){if(!a)return null;if(a&&typeof a==="object"&&"setInterval"in a){var c=a.document.documentElement.clientHeight;return a.document.compatMode==="CSS1Compat"&&c||a.document.body.clientHeight||c}else return a.nodeType===9?Math.max(a.documentElement.clientHeight,a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight):a.offsetHeight},
getStyledHeight:function(a){if(!a)return null;return typeof a.style!=="undefined"&&typeof a.style.height!=="undefined"&&(a=parseInt(a.style.height),!isNaN(a))?a:0},position:function(a){return!a?null:a.getBoundingClientRect?a.getBoundingClientRect():null},insertElementImmediately:function(a){if(a&&typeof a.innerHTML!=="undefined"){var c=document.createElement("div");c.appendChild(a);document.write(c.innerHTML)}},insertHtmlWithScripts:function(b,c){var c=["<div>&nbsp;</div>",c].join(""),d=document.createDocumentFragment(),
e=document.createElement("div");d.appendChild(e);e.innerHTML=c;e.hasChildNodes()&&e.removeChild(e.firstChild);b.appendChild(d.firstChild);d=b.getElementsByTagName("script");a(d)}}}();GV.Utils.Logger={log:function(){window.console&&console.log.apply(console,arguments)}};GV.UrlDataHandler=function(){};
GV.UrlDataHandler.prototype._setPlacementData=function(a,b){a.placement.publisherId=b.pID;a.placement.contentWebsiteId=b.cw;a.placement.placementVersionId=b.pvid;a.placement.publisherSubId=b.psid;a.placement.videoId=a.placement.videoID=b.videoId;a.placement.sapMode=b.sapMode?true:false;a.placement.deliveryMethod=b.deliveryMethod;a.placement.deliveryMethodVersion=b.deliveryMethod=="SP"?b.deliveryMethodVersionSP:b.deliveryMethodVersionSAP;a.placement.forceHTML5Player=b.forceHTML5Player?true:false;var c=
"adcomPlay,adcom20,adcom40,adcom60,adcom80,adcom100,adcomRedirect".split(",");for(name in b)name.inArray(c)&&b[name].length>0&&(a.view[name]=a.placement[name]=b[name])};GV.UrlDataHandler.prototype._setViewData=function(a,b){a.view.passOnSource=b.poS;a.view.passOnReferrer=b.poR&&GV.Utils.Validators.url(b.poR)?b.poR:void 0;a.view.referrer=b.r&&GV.Utils.Validators.url(b.r)?b.r:a.view.passOnReferrer;a.view.source=b.s&&GV.Utils.Validators.url(b.s)?b.s:a.view.passOnSource};
GV.UrlDataHandler.prototype._setFallbackData=function(a,b){if(b.fall&&GV.Utils.Validators.enumValue(GV.FallbackBehaviour,b.fall))a.placement.fallbackBehaviour=b.fall};GV.UrlDataHandler.prototype._setPageStyleData=function(a,b){a.placement.pageStyle.backgroundColour=b.bgCol&&GV.Utils.Validators.cssHexColour(b.bgCol)?b.bgCol:void 0;a.placement.pageStyle.textColour=b.txtCol&&GV.Utils.Validators.cssHexColour(b.txtCol)?b.txtCol:void 0};
GV.UrlDataHandler.prototype._setVideoPlayerOptions=function(a,b){if(b.skin)a.placement.videoPlayerOptions.skin=b.skin;a.placement.videoPlayerOptions.autoHidePlayerChrome=Boolean(b.ahide==="true");a.placement.videoPlayerOptions.windowMode=b.wmode&&GV.Utils.Validators.flashPlayerWindowMode(b.wmode)?b.wmode:void 0};GV.UrlDataHandler.prototype._areParametersValid=function(a){return a.cw&&GV.Utils.Validators.integer(a.cw)&&a.poS&&GV.Utils.Validators.url(a.poS)&&a.pvid&&GV.Utils.Validators.integer(a.pvid)};
GV.UrlDataHandler.prototype.getData=function(a,b){if(!a||!b||typeof b!=="function")throw Error("URL data source needs environmental data and a callback");var c=GV.Utils.QueryString.getParameters(window.location.href);this._areParametersValid(c)?(this._setPlacementData(a,c),this._setViewData(a,c),this._setFallbackData(a,c),this._setPageStyleData(a,c),this._setVideoPlayerOptions(a,c),b(null)):(c=new GV.Data.Error(GV.ErrorCode.EMBED_CODE_INVALID),b(c))};GV.RenderType={PLAYER:0,FALLBACK:1,ERROR:2};
GV.ErrorElementHandler=function(){this._stringFormatter=void 0};GV.ErrorElementHandler.prototype._isValidTemplateElement=function(a){return a&&a.element};GV.ErrorElementHandler.prototype._errorMessage="Content cannot currently be displayed";GV.ErrorElementHandler.prototype._errorCodeTemplate="Error code: #{{code}}";
GV.ErrorElementHandler.prototype.process=function(a,b,c){if(!this._isValidTemplateElement(a))throw Error("Handler needs a template element");if(b===GV.RenderType.ERROR){if(b=a.element.getElementsByTagName("p")[0])if(b.insertBefore(document.createTextNode(this._errorMessage),b.firstChild),c&&(b=b.getElementsByTagName("span")[0])){if(!this._stringFormatter)this._stringFormatter=new GV.Utils.StringFormatter;c=this._stringFormatter.format(this._errorCodeTemplate,{code:c});b.appendChild(document.createTextNode(c))}a.element.className=
"visible"}else a.element.className=""};GV.FallbackElementHandler=function(){};GV.Utils.makeObservable.call(GV.FallbackElementHandler.prototype);GV.FallbackElementHandler.prototype._isValidTemplateElement=function(a){return a&&a.element};
GV.FallbackElementHandler.prototype.process=function(a,b){if(!this._isValidTemplateElement(a))throw Error("Fallback handler needs a template element");switch(b){case GV.RenderType.FALLBACK:this.notifyObservers("FallbackElementFound",a.element);a.element.style.display="block";break;default:a.element.style.display="none"}};GV.PlayerElementHandler=function(){};GV.PlayerElementHandler.prototype._isValidTemplateElement=function(a){return a&&a.element};GV.Utils.makeObservable.call(GV.PlayerElementHandler.prototype);
GV.PlayerElementHandler.prototype.process=function(a,b){if(!this._isValidTemplateElement(a))throw Error("Player element handler requires a valid template element");switch(b){case GV.RenderType.PLAYER:var c=a.element.getAttribute("id");if(!c)throw Error("Player element must have an ID");this.notifyObservers("PlayerElementFound",c);break;case GV.RenderType.FALLBACK:case GV.RenderType.ERROR:a.element.style.display="none"}};
GV.PlayerElementHandler.prototype.cleanUp=function(a){if(!this._isValidTemplateElement(a))throw Error("Player element handler requires a valid template element");for(;a.element.hasChildNodes();)a.element.removeChild(a.element.lastChild)};GV.ThumbnailsElementHandler=function(){this._clickEventHandler=void 0};GV.Utils.makeObservable.call(GV.ThumbnailsElementHandler.prototype);GV.ThumbnailsElementHandler.prototype._isValidTemplateElement=function(a){return a&&a.element};
GV.ThumbnailsElementHandler.prototype._isValidVideoData=function(a){return a&&typeof a.length==="number"};GV.ThumbnailsElementHandler.prototype._linkPlaceholderValue="javascript:void(0)";GV.ThumbnailsElementHandler.prototype._createThumbnailForVideo=function(a,b){if(b){a.setAttribute("href",this._linkPlaceholderValue);a.setAttribute("data-gv-video-id",b.videoId);var c=document.createElement("img");c.setAttribute("src",b.imageUrl);a.appendChild(c);a.style.display="block"}else a.style.display="none"};
GV.ThumbnailsElementHandler.prototype._clickHandler=function(a){if((a=a.target.parentNode)&&a.tagName==="A")(a=a.getAttribute("data-gv-video-id"))&&this.notifyObservers("VideoSelected",a)};
GV.ThumbnailsElementHandler.prototype.process=function(a,b,c){if(!this._isValidTemplateElement(a))throw Error("Thumbnails element handler requires a template element");switch(b){case GV.RenderType.PLAYER:if(!this._isValidVideoData(c))throw Error("Thumbnails element handler needs valid video data");for(var b=a.element.getElementsByTagName("a"),d=0;d<b.length;d++)this._createThumbnailForVideo(b[d],c[1+d]);this._clickEventHandler=GV.Utils.Event.create(a.element,"click",this._clickHandler.bind(this));
a.element.style.display="block";break;case GV.RenderType.FALLBACK:case GV.RenderType.ERROR:a.element.style.display="none"}};
GV.ThumbnailsElementHandler.prototype.cleanUp=function(a){if(!this._isValidTemplateElement(a))throw Error("Thumbnails element handler requires a landing page element");this._clickEventHandler&&GV.Utils.Event.remove(a.element,"click",this._clickEventHandler);for(var b=a.element.getElementsByTagName("img"),c=b.length-1;c>=0;c--)b[c].parentNode.tagName==="A"&&b[c].parentNode.parentNode===a.element&&b[c].parentNode.removeChild(b[c])};GV.TitleElementHandler=function(){};
GV.TitleElementHandler.prototype._isValidVideoData=function(a){return a&&typeof a.length==="number"};GV.TitleElementHandler.prototype._isValidTemplateElement=function(a){return a&&a.element};
GV.TitleElementHandler.prototype.process=function(a,b,c){if(!this._isValidTemplateElement(a))throw Error("Title element handler requires a template element");switch(b){case GV.RenderType.PLAYER:if(!this._isValidVideoData(c))throw Error("Title element handler requires valid video data");if(c.length>0)a.element.innerHTML=c[0].title,a.element.style.display="block";break;case GV.RenderType.FALLBACK:case GV.RenderType.ERROR:if(a.element.nodeName!=="TITLE")a.element.style.display="none"}};
GV.AttributeElementDetector=function(a){this.attributeName=a};GV.AttributeElementDetector.prototype._convertToTemplateElement=function(a,b){return new GV.Data.TemplateElement(a,a.getAttribute(b))};GV.AttributeElementDetector.prototype._getValidDescendants=function(a,b,c){var d=a.getAttribute(b);d&&c.push(new GV.Data.TemplateElement(a,d));if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++)this._getValidDescendants(a.childNodes[d],b,c)};
GV.AttributeElementDetector.prototype.getElements=function(){if(!this.attributeName)throw Error("You must provide an attribute name to detect elements");if(document.querySelectorAll){for(var a=document.querySelectorAll("["+this.attributeName+"]"),b=[],c=0;c<a.length;c++)b.push(this._convertToTemplateElement(a[c],this.attributeName));return b}else return a=[],this._getValidDescendants(document.getElementsByTagName("html")[0],this.attributeName,a),a};
GV.LandingPage=function(a,b){this.detector=a;this.elementHandlerFactory=b;this._hasRendered=false;this._elements=void 0;this._handlers={};this.subscribe("PlayerElementFound",this._proxyElementHandlerEvent);this.subscribe("FallbackElementFound",this._proxyElementHandlerEvent);this.subscribe("VideoSelected",this._proxyElementHandlerEvent)};GV.Utils.makeObserver.call(GV.LandingPage.prototype);GV.Utils.makeObservable.call(GV.LandingPage.prototype);
GV.LandingPage.prototype._isValidElementDetector=function(a){return a&&typeof a.getElements==="function"};GV.LandingPage.prototype._isValidHandlerFactory=function(a){return a&&typeof a.getInstance==="function"};GV.LandingPage.prototype._getElements=function(){if(!this._elements)this._elements=this.detector.getElements();return this._elements};GV.LandingPage.prototype._getHandler=function(a){a=this.elementHandlerFactory.getInstance(a);GV.Utils.isObservable(a)&&a.registerObserver(this);return a};
GV.LandingPage.prototype._proxyElementHandlerEvent=function(a){this.notifyObservers(a.type,a.data)};GV.LandingPage.prototype._formatColour=function(a){return a.indexOf("#")===0?a:["#",a].join("")};GV.LandingPage.prototype._forEachHandledElement=function(a){if(typeof a==="function"){var b=this._getElements();if(b)for(var c=0;c<b.length;c++){var d=this._getHandler(b[c].type);d&&a.call(this,b[c],d)}}};
GV.LandingPage.prototype.render=function(a,b){if(!this._isValidElementDetector(this.detector)||!this._isValidHandlerFactory(this.elementHandlerFactory))throw Error("Layout template needs a detector and an element handler factory");this._forEachHandledElement(function(c,d){this._hasRendered&&typeof d.cleanUp==="function"&&d.cleanUp(c);d.process(c,a,b)});this._hasRendered=true};
GV.LandingPage.prototype.applyStyle=function(a){if(a){if(GV.Utils.Validators.cssHexColour(a.backgroundColour))document.body.style.backgroundColor=this._formatColour(a.backgroundColour);if(GV.Utils.Validators.cssHexColour(a.textColour))document.body.style.color=this._formatColour(a.textColour)}};GV.LocationGroupUrlParser=function(){};GV.LocationGroupUrlParser.prototype._locationGroupKeyword="facebook";
GV.LocationGroupUrlParser.prototype._locationGroupRegExp=RegExp("://[^/]*"+GV.LocationGroupUrlParser.prototype._locationGroupKeyword+"[^/]*/");GV.LocationGroupUrlParser.prototype.getLocationGroup=function(a){var b="";if(arguments.length>0)for(var c=0;c<arguments.length;c++)if(this._locationGroupRegExp.test(arguments[c])){b=this._locationGroupKeyword;break}return b};GV.FlashVarsFormatter=function(a){this.locationGroupUrlParser=a};
GV.FlashVarsFormatter.prototype.setSkinPath=function(a){this.skinPath=a};GV.FlashVarsFormatter.prototype.setPluginPath=function(a){this.pluginPath=a};GV.FlashVarsFormatter.prototype.setPlaylistPath=function(a){this.playlistPath=a};GV.FlashVarsFormatter.prototype._addVideoParametersToFlashVars=function(a,b){a.iVideoId=b.videoId};
GV.FlashVarsFormatter.prototype._addPlacementParametersToFlashVars=function(a,b){a.pID=b.publisherId;if(b.publisherSubId)a.psid=b.publisherSubId;a.cw=b.contentWebsiteId;a.deliveryMethod=b.deliveryMethod;a.deliveryMethodVersion=b.deliveryMethodVersion;a.placementVersionId=b.placementVersionId;if(GV.applicationConfig.playerServicesUrl)a.playerServicesUrl=GV.applicationConfig.playerServicesUrl;for(var c="adcomPlay,adcom20,adcom40,adcom60,adcom80,adcom100,adcomRedirect".split(",");c.length;){var d=c.shift();
b[d]&&(a[d]=b[d])}};
GV.FlashVarsFormatter.prototype._addViewParametersToFlashVars=function(a,b){if(!this.locationGroupUrlParser||typeof this.locationGroupUrlParser.getLocationGroup!=="function")throw Error("You must provide a valid location group URL parser");var c=this.locationGroupUrlParser.getLocationGroup(b.referrer,b.source,b.passOnReferrer,b.passOnSource);a.locationGroup=c;a.location_url=b.source?encodeURIComponent(b.source):"";a.referer_url=b.referrer?encodeURIComponent(b.referrer):"";a.passOnSource=b.passOnSource?
encodeURIComponent(b.passOnSource):"";a.passOnReferrer=b.passOnReferrer?encodeURIComponent(b.passOnReferrer):""};
GV.FlashVarsFormatter.prototype._addVideoPlayerParametersToFlashVars=function(a,b,c){a.overridePlaylist="1";a.autoHideChrome=b.autoHidePlayerChrome?"1":"";a.skinName=b.skin;if(this.skinPath)a.skinPath=encodeURIComponent(this.skinPath);if(this.pluginPath)a.pluginPath=encodeURIComponent(this.pluginPath);if(this.playlistPath)a.staticPlaylistUrl=encodeURIComponent(this.playlistPath);a.bAutoStart=c?1:0};
GV.FlashVarsFormatter.prototype._addImpressionTrackingParametersToFlashVars=function(a){a.impressionTrackerId=0;a.genericImpressionUrl=""};
GV.FlashVarsFormatter.prototype.getFlashVars=function(a,b,c){if(!a||!b||!c)throw Error("You must pass all parameters to get flashvars");else{var d={};this._addVideoParametersToFlashVars(d,a);this._addPlacementParametersToFlashVars(d,b);this._addViewParametersToFlashVars(d,c);this._addVideoPlayerParametersToFlashVars(d,b.videoPlayerOptions,c.autoPlay);this._addImpressionTrackingParametersToFlashVars(d);return d}};GV.FlashParamsFormatter=function(){};
GV.FlashParamsFormatter.prototype._getWindowMode=function(){return this.windowMode||"opaque"};GV.FlashParamsFormatter.prototype.setWindowMode=function(a){this.windowMode=a};GV.FlashParamsFormatter.prototype.getParams=function(){return{allowScriptAccess:"always",allowFullScreen:true,quality:"high",wmode:this._getWindowMode()}};GV.FlashEmbedder=function(a){this.swfUrl=a};GV.Utils.makeObservable.call(GV.FlashEmbedder.prototype);GV.FlashEmbedder.prototype.setFlashVars=function(a){this.flashVars=a};
GV.FlashEmbedder.prototype.setParams=function(a){this.params=a};GV.FlashEmbedder.prototype._getFlashVars=function(){return this.flashVars||{}};GV.FlashEmbedder.prototype._getParams=function(){return this.params||{}};
GV.FlashEmbedder.prototype.embed=function(a){if(!this.swfUrl||!a)throw Error("You must provide a SWF URL and an embed target element to embed the Flash Player");else{var b=document.getElementById(a);if(b){var c=this._getParams(),d=GV.Utils.Dom.width(b)||GV.Utils.Dom.getStyledWidth(b),b=GV.Utils.Dom.height(b)||GV.Utils.Dom.getStyledHeight(b),e=this._getFlashVars(),f="",g;for(g in e)f+=g+"="+e[g]+"&";try{g='<object type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="embeddedPlayerVideo" width="'+
d+'" height="'+b+'">';for(var h in c)c.hasOwnProperty(h)&&(g+='<param name="'+h+'" value="'+c[h]+'"/>');g+='<param name="movie" value="'+this.swfUrl+'"/>';g+='<param name="flashvars" value="'+f+'"/>';g+='<embed name="embeddedPlayerVideo" type="application/x-shockwave-flash" ';g+='src="'+this.swfUrl+'" ';g+='width="'+d+'" ';g+='height="'+b+'" ';for(h in c)c.hasOwnProperty(h)&&(g+=h+'="'+c[h]+'" ');g+='flashvars="'+f+'"></embed>';g+="</object>";document.getElementById(a).innerHTML=g;this.notifyObservers("PlayerEmbedSucceeded")}catch(k){this.notifyObservers("PlayerEmbedFailed")}}else throw Error("You must provide an element that exists in the document to embed the Flash Player");
}};GV.FlashPlayer=function(a,b){this.embedder=a;this.playerInfo=b;this.currentState=new GV.Data.PlayerState;var c=this._fireImpressionEvent.bind(this),d=this._proxyPlayerEvent.bind(this);this.subscribe("PlayerEmbedSucceeded",c);this.subscribe("PlayerEmbedFailed",d)};GV.Utils.makeObservable.call(GV.FlashPlayer.prototype);GV.Utils.makeObserver.call(GV.FlashPlayer.prototype);GV.FlashPlayer.prototype._proxyPlayerEvent=function(a){this.notifyObservers(a.type)};
GV.FlashPlayer.prototype._fireImpressionEvent=function(a){a&&a.type&&a.type==="PlayerEmbedSucceeded"&&this.notifyObservers("Player.impression",this.currentState)};GV.FlashPlayer.prototype._isValidFlashVarsFormatter=function(a){return a&&typeof a.getFlashVars==="function"};GV.FlashPlayer.prototype.setFlashVarsFormatter=function(a){this.flashVarsFormatter=a};GV.FlashPlayer.prototype.setParamsFormatter=function(a){this.paramsFormatter=a};
GV.FlashPlayer.prototype.getPlayerInfo=function(){if(!this.playerInfo)throw Error("Flash player needs player info");return this.playerInfo};
GV.FlashPlayer.prototype.embed=function(a,b,c,d){if(!this.embedder||typeof this.embedder.embed!=="function")throw Error("You must initialise FlashPlayer with a valid player embedder");if(!a)throw Error("You must pass an element ID to embed");this.currentState.video=b;this.currentState.percentElapsed=0;typeof this.embedder.registerObserver==="function"&&this.embedder.registerObserver(this);this._isValidFlashVarsFormatter(this.flashVarsFormatter)&&b&&c&&d&&typeof this.embedder.setFlashVars==="function"&&
this.embedder.setFlashVars(this.flashVarsFormatter.getFlashVars(b,c,d));this.paramsFormatter&&typeof this.paramsFormatter.getParams==="function"&&typeof this.embedder.setParams==="function"&&this.embedder.setParams(this.paramsFormatter.getParams());try{this.embedder.embed(a)}catch(e){this.notifyObservers("PlayerEmbedFailed")}};GV.FlashPlayer.prototype.cleanUp=function(){this.embedder&&this.embedder.deregisterObserver(this)};GV.Skin=function(){};
GV.Skin.prototype.embed=function(a){if(!a||typeof a!=="string")throw Error("Skin name was not provided");GV.Skin.prototype._includeStyle("../css/"+a+".css")};GV.Skin.prototype._includeStyle=function(a){if(document.createStyleSheet)document.createStyleSheet(a);else{var b=document.createElement("link");b.rel="stylesheet";b.href=a;document.getElementsByTagName("head")[0].appendChild(b)}};GV.HtmlPlayerEmbeder=function(a){this._skin=a;this._element=this._template=null};GV.Utils.makeObservable.call(GV.HtmlPlayerEmbeder.prototype);
GV.HtmlPlayerEmbeder.prototype.embed=function(a,b){var c=document.getElementById(a);if(!c)throw Error("You must provide an element that exists in the document to embed the HTML5 Player");if(!this._skin||!b)throw Error("You must provide skin");this._element=c;this._skin.embed(b);this._insertTemplate(c);this.notifyObservers("PlayerEmbedSucceeded")};GV.HtmlPlayerEmbeder.prototype.getElement=function(){return this._template};
GV.HtmlPlayerEmbeder.prototype._insertTemplate=function(a){var b={};b.wrapper=GV.Utils.Dom.createElement("div","gvWrapper");var c=GV.Utils.Dom.height(a),d=GV.Utils.Dom.width(a);b.wrapper.css({display:"none",height:c,width:d});b.wrapper.height=c;b.wrapper.width=d;b.player=GV.Utils.Dom.createElement("div","gvHTML5Player");b.player.video=GV.Utils.Dom.createElement("video");b.player.impressionImg=GV.Utils.Dom.createElement("img");b.player.bigPlay=GV.Utils.Dom.createElement("div","gvBigPlay");b.player.bigReplay=
GV.Utils.Dom.createElement("div","gvBigReplay");b.player.loading=GV.Utils.Dom.createElement("div","gvLoading");b.player.appendChild(b.player.video);b.player.appendChild(b.player.impressionImg);b.player.appendChild(b.player.bigPlay);b.player.appendChild(b.player.bigReplay);b.player.appendChild(b.player.loading);if(!GV.Utils.iOS.ios())b.player.sponsoredBy=GV.Utils.Dom.createElement("div","gvSponsoredBy"),b.player.appendChild(b.player.sponsoredBy);b.wrapper.appendChild(b.player);GV.Utils.iOS.ios()?(b.sponsoredBy=
GV.Utils.Dom.createElement("div","gviOSSponsoredBy"),b.privacy=GV.Utils.Dom.createElement("div","gviOSPrivacy"),b.wrapper.appendChild(b.sponsoredBy),b.wrapper.appendChild(b.privacy)):(b.control=GV.Utils.Dom.createElement("div","gvControl"),b.control.timeline=GV.Utils.Dom.createElement("div","gvTimeline"),b.control.timelineHolder=GV.Utils.Dom.createElement("div","gvTimelineHolder"),b.control.timelineSlider=GV.Utils.Dom.createElement("div","gvTimelineSlider"),b.control.timelineLoader=GV.Utils.Dom.createElement("div",
"gvTimelineLoader"),b.control.play=GV.Utils.Dom.createElement("div","gvPlay"),b.control.pause=GV.Utils.Dom.createElement("div","gvPause"),b.control.volume=GV.Utils.Dom.createElement("div","gvVolume"),b.control.volumeline=GV.Utils.Dom.createElement("div","gvVolumeline"),b.control.volumeHolder=GV.Utils.Dom.createElement("div","gvVolumeHolder"),b.control.volumeSlider=GV.Utils.Dom.createElement("div","gvVolumeSlider"),b.control.time=GV.Utils.Dom.createElement("div","gvTime"),b.control.privacy=GV.Utils.Dom.createElement("a",
"gvPrivacy"),b.control.fullScreen=GV.Utils.Dom.createElement("div","gvFullScreen"),b.control.normalScreen=GV.Utils.Dom.createElement("div","gvNormalScreen"),b.control.timelineHolder.appendChild(b.control.timelineSlider),b.control.timelineHolder.appendChild(b.control.timelineLoader),b.control.timeline.appendChild(b.control.timelineHolder),b.control.appendChild(b.control.timeline),b.control.appendChild(b.control.play),b.control.appendChild(b.control.pause),b.control.appendChild(b.control.volume),b.control.volumeHolder.appendChild(b.control.volumeSlider),
b.control.volumeline.appendChild(b.control.volumeHolder),b.control.appendChild(b.control.volumeline),b.control.appendChild(b.control.time),b.control.appendChild(b.control.normalScreen),b.control.appendChild(b.control.fullScreen),b.control.appendChild(b.control.privacy),b.wrapper.appendChild(b.control));this._template=b;a.appendChild(this._template.wrapper)};
GV.HtmlPlayer=function(a,b,c){this.version=1;this.type=GV.PlayerType.HTML5;this.embedder=a;this.privacy=b;this.playerInfo=c;this.currentState=new GV.Data.PlayerState;a=this._fireImpressionEvent.bind(this);b=this._proxyPlayerEvent.bind(this);this.subscribe("PlayerEmbedSucceeded",a);this.subscribe("PlayerEmbedFailed",b)};GV.Utils.makeObservable.call(GV.HtmlPlayer.prototype);GV.Utils.makeObserver.call(GV.HtmlPlayer.prototype);GV.HtmlPlayer.prototype._proxyPlayerEvent=function(a){this.notifyObservers(a.type)};
GV.HtmlPlayer.prototype._fireImpressionEvent=function(a){a&&a.type&&a.type==="PlayerEmbedSucceeded"&&this.notifyObservers("Player.impression",this.currentState)};GV.HtmlPlayer.prototype.getPlayerInfo=function(){if(!this.playerInfo)throw Error("HTML player needs player info");return this.playerInfo};
GV.HtmlPlayer.prototype.embed=function(a,b,c,d){if(!this.embedder||typeof this.embedder.embed!=="function")throw Error("You must initialise HtmlPlayer with a valid player embedder");if(!a)throw Error("You must pass an element ID to embed");typeof this.embedder.registerObserver==="function"&&this.embedder.registerObserver(this);if(!b)throw Error("You must pass video to embed");try{this.currentState.video=b;this.embedder.embed(a,c.videoPlayerOptions.skin);var e=this.embedder.getElement();this.init(b,
e,d.autoPlay)}catch(f){this.notifyObservers("PlayerEmbedFailed")}};
GV.HtmlPlayer.prototype.init=function(a,b,c){function d(){var b=a.clickthrough.target?a.clickthrough.target:"_blank";/\S/.test(a.clickthrough.url)&&(window.open(a.clickthrough.url,b),m(),i.notifyObservers("Player.redirect",i.currentState));return false}function e(){var b=a.sponsoredBy.target?a.sponsoredBy.target:"_blank";/\S/.test(a.sponsoredBy.url)&&(window.open(a.sponsoredBy.url,b),m(),i.notifyObservers("Player.redirect",i.currentState));return false}function f(){window.open(n.url,n.target);m();
return false}function g(){function a(c){b.player.video.lock=true;var d=o("timelineWidth",function(){return GV.Utils.Dom.width(b.control.timeline)-GV.Utils.Dom.width(b.control.timelineSlider)}),c=c.pageX-o("timelinePosition",function(){return GV.Utils.Dom.position(b.control.timeline).left+GV.Utils.Dom.width(b.control.timelineSlider)/2-2}),c=Math.max(0,Math.min(d,parseFloat(c)))/d,d=c*b.player.video.duration;d>=b.player.video.duration&&(d=b.player.video.duration-0.1);try{b.player.video.currentTime=
d.toFixed(1)}catch(e){i.notifyObservers("Player.seek.error",e)}x();h()}function c(){b.player.video.lock=false;GV.Utils.Event.remove(document,"mousemove",d);GV.Utils.Event.remove(document,"mouseup",e);if(!b.player.video._paused)b.player.video._replay?(b.player.video._replay=false,t(),l()):b.player.video.play()}var d,e;GV.Utils.Event.create(b.control.timeline,"mousedown",function(f){f.preventDefault();b.player.video._paused=b.player.video.paused;b.player.video.pause();a.call(this,f);d=GV.Utils.Event.create(document,
"mousemove",a);e=GV.Utils.Event.create(document,"mouseup",c)})}function h(){var a=b.player.video.currentTime/b.player.video.duration;b.control.timelineSlider.style.left=a*100+"%";b.player.video.positionPercent=a;b.control.timelineLoader.style.width=a*100+"%"}function k(){GV.Utils.Event.create(b.control.play,"click",function(){b.player.video._replay?y():l()})}function j(){GV.Utils.Event.create(b.control.pause,"click",function(){b.player.video._loading||m()})}function w(){b.player.video._volume=1;GV.Utils.Event.create(b.control.volume,
"mouseover",q);GV.Utils.Event.create(b.control.volume,"mouseout",u);GV.Utils.Event.create(b.control.volume,"click",function(){b.player.video.volume=b.player.video.volume?0:b.player.video._volume})}function q(){clearTimeout(z);b.control.volumeline.css({display:"block"})}function u(){z=setTimeout(function(){b.control.volumeline.css({display:"none"})},500)}function C(){function a(c){q();var d=o("volumeWidth",function(){return GV.Utils.Dom.width(b.control.volumeHolder)}),c=c.pageX-o("volumePosition",
function(){return GV.Utils.Dom.position(b.control.volumeHolder).left+GV.Utils.Dom.width(b.control.volumeSlider)/2}),c=Math.max(0,Math.min(d,parseFloat(c)))/d;b.control.volumeSlider.style.left=c*100+"%";b.player.video.volume=c;b.player.video._volume=c;A()}function c(a){a.target.className!="gvVolumeSlider"&&a.target.className!="gvVolumeHolder"&&u();GV.Utils.Event.remove(document,"mousemove",d);GV.Utils.Event.remove(document,"mouseup",e)}var d,e;GV.Utils.Event.create(b.control.volumeline,"mouseover",
q);GV.Utils.Event.create(b.control.volumeline,"mouseout",u);GV.Utils.Event.create(b.control.volumeHolder,"mousedown",function(b){b.preventDefault();q();a.call(this,b);d=GV.Utils.Event.create(document,"mousemove",a);e=GV.Utils.Event.create(document,"mouseup",c)})}function A(){if(b.player.video.volume==0)b.control.volume.className="gvVolume mute";else if(b.player.video.volume>0&&b.player.video.volume<=0.25)b.control.volume.className="gvVolume level0";else if(b.player.video.volume>0.25&&b.player.video.volume<=
0.5)b.control.volume.className="gvVolume level1";else if(b.player.video.volume>0.5&&b.player.video.volume<=0.75)b.control.volume.className="gvVolume level2";else if(b.player.video.volume>0.75)b.control.volume.className="gvVolume level3"}function D(){GV.Utils.Event.create(b.control.normalScreen,"click",function(){document.documentElement.style.overflow=E;b.control.normalScreen.css({display:"none"});b.control.fullScreen.css({display:"block"});GV.Utils.Dom.removeClass(b.wrapper,"gvFullScreenMode");GV.Utils.Event.remove(window,
"resize",r["window.resize"]);GV.Utils.Event.remove(document,"keydown",r["document.keydown"]);var a=s;GV.Utils.iOS.ios()||(a-=B);b.player.css({height:a+"px"})})}function o(a,b){typeof v[a]==="undefined"&&(v[a]=b());return v[a]}function l(){function a(){GV.Utils.Dom.addClass(c,"ready");clearTimeout(d);c.play();i.notifyObservers("Player.play",i.currentState);c._loading=false;c._firstPlay=false;b.player.loading.css({display:"none"});GV.Utils.iOS.ios()||GV.Utils.Dom.addClass(b.control.timeline,"gvShow");
t();try{GV.Utils.Event.remove(c,"canplay",e)}catch(f){}}var c=b.player.video,d,e;c._loading||(c._firstPlay?(c.play(),c.readyState!==4?(d=setTimeout(function(){c._loading=true;c.pause();b.player.bigPlay.css({display:"none"});b.player.loading.css({display:"block"})},100),e=GV.Utils.Event.create(c,"canplay",a)):(a(),i.notifyObservers("Player.play",i.currentState))):(c.play(),c._replay?i.notifyObservers("Player.replay",i.currentState):i.notifyObservers("Player.play",i.currentState)),GV.Utils.iOS.ios()||
(b.control.play.css({display:"none"}),b.control.pause.css({display:"block"})))}function t(){GV.Utils.iOS.ipad&&(b.privacy.css({visibility:"hidden"}),b.sponsoredBy.css({visibility:"hidden"}),b.player.video.css({visibility:"visible"}));!GV.Utils.iOS.ipod&&!GV.Utils.iOS.iphone&&(b.player.video.css({display:"block"}),b.player.bigPlay.css({display:"none"}),b.player.bigReplay.css({display:"none"}),b.player.impressionImg.css({display:"none"}));if(GV.Utils.iOS.iphone||GV.Utils.iOS.ipod)b.player.bigReplay.css({display:"none"}),
b.player.bigPlay.css({display:"block"})}function y(){t();if(!GV.Utils.iOS.ios())b.control.timelineSlider.style.left=0,b.player.video.positionPercent=0;l();b.player.video._replay=false}function F(){GV.Utils.Event.remove(b.player.bigReplay,"click",r.onReplayClick);y();return false}function m(){GV.Utils.iOS.ios()||(b.control.play.css({display:"block"}),b.control.pause.css({display:"none"}));b.player.video.pause();i.notifyObservers("gvPause",i.currentState)}function x(){b.control.time.innerHTML=GV.Utils.String.formatTime(b.player.video.currentTime)+
" / "+GV.Utils.String.formatTime(b.player.video.duration)}var z,E,r={},v={},i=this,B=30,s=b.wrapper.height,n=this.privacy;(function(){b.player.video.positionPercent=0;b.player.video.position=0;b.player.video._firstPlay=true;b.player.video.preload="preload";b.player.video.src=a.mp4Url;c&&!GV.Utils.iOS.ios()&&setTimeout(l,1);GV.Utils.Event.create(b.player.video,"ended",function(){b.player.video._replay=true;GV.Utils.iOS.ipad&&(b.player.impressionImg.css({display:"block"}),b.player.bigReplay.css({display:"block"}),
b.privacy.css({visibility:"visible"}),b.sponsoredBy.css({visibility:"visible"}),b.player.video.css({visibility:"hidden"}));if(GV.Utils.iOS.iphone||GV.Utils.iOS.ipod)b.player.bigPlay.css({display:"none"}),b.player.bigReplay.css({display:"block"});GV.Utils.iOS.ios()||(b.player.impressionImg.css({display:"block"}),b.player.bigReplay.css({display:"block"}),b.control.play.css({display:"block"}),b.control.pause.css({display:"none"}),b.player.video.css({display:"none"}));r.onReplayClick=GV.Utils.Event.create(b.player.bigReplay,
"click",F);i.notifyObservers("Player.end",i.currentState)});GV.Utils.Event.create(b.player.video,"error",function(a){i.notifyObservers("Player.error",a)});GV.Utils.Event.create(b.player.video,"timeupdate",function(){this.position=this.currentTime});GV.Utils.iOS.ipod||GV.Utils.iOS.iphone?GV.Utils.Dom.addClass(b.player.video,"gvIphone"):GV.Utils.iOS.ipad?GV.Utils.Dom.addClass(b.player.video,"gvIpad"):b.player.video.css({display:"none"});GV.Utils.iOS.ios()?b.player.video.controls="controls":(GV.Utils.Event.create(b.player.video,
"contextmenu",function(){return false}),GV.Utils.Event.create(b.player.video,"timeupdate",function(){b.player.video.lock||(x(),h());i.currentState.percentElapsed=b.player.video.positionPercent;i.notifyObservers("Player.progress",i.currentState)}),GV.Utils.Event.create(b.player.video,"volumechange",function(){A();i.notifyObservers("gvVolumechange",i.currentState)}),GV.Utils.Event.create(b.player.video,"click",d))})();b.player.impressionImg.src=a.imageUrl;b.player.impressionImg.onload=function(){var a=
b.wrapper.width,c=s;GV.Utils.iOS.ios()||(c=s-26);var d=c,e=Math.ceil(this.width*(d/this.height));e>a&&(e=a,d=Math.ceil(this.height*(e/this.width)));this.height=d;this.width=e;this.css({visibility:"visible",paddingTop:Math.round((c-d)/2)+"px"})};GV.Utils.Event.create(b.player.bigPlay,"click",l);GV.Utils.iOS.ios()?(b.privacy.innerHTML=n.text,GV.Utils.Event.create(b.privacy,"click",f),/\S/.test(a.sponsoredBy.url)?(b.sponsoredBy.innerHTML=a.sponsoredBy.url,GV.Utils.Event.create(b.sponsoredBy,"click",
e)):b.sponsoredBy.css({display:"none"})):(b.player.style.height=s-B+"px",g(),k(),j(),w(),C(),b.control.time.innerHTML="0:00 / 0:00",b.control.privacy.innerHTML=n.text,GV.Utils.Event.create(b.control.privacy,"click",f),D(),/\S/.test(a.sponsoredBy.url)?(b.player.sponsoredBy.innerHTML=a.sponsoredBy.url,GV.Utils.Event.create(b.player.sponsoredBy,"click",e)):b.player.sponsoredBy.css({display:"none"}))};
GV.HtmlPlayer.prototype.cleanUp=function(){if(this.embedder){this.embedder.deregisterObserver(this);var a=this.embedder.getElement();GV.Utils.Event.removeAll(a.player.video,"ended");GV.Utils.Event.removeAll(a.player.video,"error");GV.Utils.Event.removeAll(a.player.video,"timeupdate");GV.Utils.Event.removeAll(a.player.video,"contextmenu");GV.Utils.Event.removeAll(a.player.video,"timeupdate");GV.Utils.Event.removeAll(a.player.video,"volumechange");GV.Utils.Event.removeAll(a.player.video,"click");GV.Utils.Event.removeAll(a.player.bigPlay,
"click");GV.Utils.Event.removeAll(a.player.bigReplay,"click");GV.Utils.Event.removeAll(a.privacy,"click");GV.Utils.Event.removeAll(a.sponsoredBy,"click");GV.Utils.iOS.ios()?GV.Utils.Event.removeAll(a.player.sponsoredBy,"click"):(GV.Utils.Event.removeAll(a.control.play,"click"),GV.Utils.Event.removeAll(a.control.pause,"click"),GV.Utils.Event.removeAll(a.control.volume,"mouseover"),GV.Utils.Event.removeAll(a.control.volume,"mouseout"),GV.Utils.Event.removeAll(a.control.volume,"click"),GV.Utils.Event.removeAll(a.control.volumeline,
"mouseover"),GV.Utils.Event.removeAll(a.control.volumeline,"mouseout"),GV.Utils.Event.removeAll(a.control.volumeHolder,"mousedown"),GV.Utils.Event.removeAll(a.control.fullScreen,"click"),GV.Utils.Event.removeAll(a.control.normalScreen,"click"),GV.Utils.Event.removeAll(a.control.timeline,"mousedown"),GV.Utils.Event.removeAll(a.control.privacy,"click"))}};GV.CustomTemplateValidator=function(){};GV.CustomTemplateValidator.prototype._invalidValues=["Content ID is invalid","Template not found"];
GV.CustomTemplateValidator.prototype.isValid=function(a){if(!a)return false;for(var b=0;b<this._invalidValues.length;b++)if(a===this._invalidValues[b])return false;return true};GV.CustomTemplatePlaceholderReplacer=function(){this.stringFormatter=void 0};GV.CustomTemplatePlaceholderReplacer.prototype.setPlayerDimensions=function(a,b){this.width=a;this.height=b};GV.CustomTemplatePlaceholderReplacer.prototype.setVideo=function(a){this.video=a};
GV.CustomTemplatePlaceholderReplacer.prototype.setPlacement=function(a){this.placement=a};GV.CustomTemplatePlaceholderReplacer.prototype.setView=function(a){this.view=a};GV.CustomTemplatePlaceholderReplacer.prototype._addDimensionsToParameters=function(a){a.WIDTH=this.width||"";a.HEIGHT=this.height||""};GV.CustomTemplatePlaceholderReplacer.prototype._addVideoValuesToParameters=function(a){a.SWFURI=this.video&&this.video.swfUrl?this.video.swfUrl:""};
GV.CustomTemplatePlaceholderReplacer.prototype._addPlacementValuesToParameters=function(a){a.PUBLISHERID=this.placement&&this.placement.publisherId?this.placement.publisherId:"";a.PUBLISHERSUBID=this.placement&&this.placement.publisherSubId?this.placement.publisherSubId:"";a.CONTENTWEBSITE=this.placement&&this.placement.contentWebsiteId?this.placement.contentWebsiteId:""};
GV.CustomTemplatePlaceholderReplacer.prototype._addViewValuesToParameters=function(a){a.PASSONSOURCE=this.view&&this.view.passOnSource?this.view.passOnSource:"";a.PASSONREFERER=this.view&&this.view.passOnReferrer?this.view.passOnReferrer:"";a.LOCATIONURL=this.view&&this.view.source?this.view.source:"";a.REFERERURL=this.view&&this.view.referrer?this.view.referrer:"";a.AUTOPLAY=this.view&&typeof this.view.autoPlay==="boolean"?this.view.autoPlay.toString():""};
GV.CustomTemplatePlaceholderReplacer.prototype.replacePlaceholders=function(a){if(!a)throw Error("Placeholder replacer needs template HTML");if(!this.stringFormatter)this.stringFormatter=new GV.Utils.StringFormatter("[","]");var b={};this._addDimensionsToParameters(b);this._addVideoValuesToParameters(b);this._addPlacementValuesToParameters(b);this._addViewValuesToParameters(b);return this.stringFormatter.format(a,b)};GV.HtmlSnippetEmbedder=function(){};
GV.HtmlSnippetEmbedder.prototype.setHtmlSnippet=function(a){this.snippet=a};GV.HtmlSnippetEmbedder.prototype.embed=function(a){if(!this.snippet||!a)throw Error("Embedder needs a HTML snippet and an embed element");GV.Utils.Dom.insertHtmlWithScripts(a,this.snippet)};GV.CustomTemplate=function(a,b,c,d){this.templateService=a;this.embedder=b;this.validator=c;this.placeholderReplacer=d;this.playerInfo=new GV.Data.PlayerInfo(GV.PlayerType.CUSTOM_TEMPLATE);this.currentState=new GV.Data.PlayerState};GV.Utils.makeObservable.call(GV.CustomTemplate.prototype);
GV.CustomTemplate.prototype._isValidTemplateService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};GV.CustomTemplate.prototype._isValidEmbedder=function(a){return a&&typeof a.setHtmlSnippet==="function"&&typeof a.embed==="function"};GV.CustomTemplate.prototype._isValidValidator=function(a){return a&&typeof a.isValid==="function"};GV.CustomTemplate.prototype.getPlayerInfo=function(){return this.playerInfo};
GV.CustomTemplate.prototype._handleRequestFailure=function(a){this.notifyObservers("PlayerEmbedFailed",a)};GV.CustomTemplate.prototype._fireImpressionEvent=function(){this.notifyObservers("Player.impression",this.currentState)};GV.CustomTemplate.prototype._firePlayEvent=function(){this.currentState.percentElapsed=0;this.notifyObservers("Player.play",this.currentState)};GV.CustomTemplate.prototype._fireEndEvent=function(){this.currentState.percentElapsed=1;this.notifyObservers("Player.end",this.currentState)};
GV.CustomTemplate.prototype._implementLegacyTrackingFunctions=function(){if(typeof window.tick!=="function"&&typeof window.tock!=="function")window.tick=this._firePlayEvent.bind(this),window.tock=this._fireEndEvent.bind(this)};
GV.CustomTemplate.prototype._finishEmbed=function(a,b,c){b?this._handleRequestFailure(new GV.Data.Error(GV.ErrorCode.CUSTOM_TEMPLATE_SERVICE_CALL_FAILED)):this.validator.isValid(c)?(this.embedder.setHtmlSnippet(this.placeholderReplacer?this.placeholderReplacer.replacePlaceholders(c):c),this.embedder.embed(document.getElementById(a)),this._fireImpressionEvent(),this._implementLegacyTrackingFunctions()):this._handleRequestFailure(new GV.Data.Error(GV.ErrorCode.CUSTOM_TEMPLATE_SERVICE_CALL_INVALID))};
GV.CustomTemplate.prototype.embed=function(a,b,c,d){if(!this._isValidTemplateService(this.templateService)||!this._isValidEmbedder(this.embedder)||!this._isValidValidator(this.validator)||!a||!b||!b.videoId)throw Error("Custom template needs a template service, embedder, validator, embed element ID and video");this.currentState.video=b;if(this.placeholderReplacer){if(typeof this.placeholderReplacer.setPlayerDimensions==="function"){var e=document.getElementById(a),f=GV.Utils.Dom.width(e),e=GV.Utils.Dom.height(e);
this.placeholderReplacer.setPlayerDimensions(f.toString(),e.toString())}typeof this.placeholderReplacer.setVideo==="function"&&this.placeholderReplacer.setVideo(b);typeof this.placeholderReplacer.setPlacement==="function"&&this.placeholderReplacer.setPlacement(c);typeof this.placeholderReplacer.setView==="function"&&this.placeholderReplacer.setView(d)}b=this.templateService.newRequest().withParameter("videoId",b.videoId);a=this._finishEmbed.bind(this,a);this.templateService.makeRequest(b,a)};
GV.Html5CapabilityDetector=function(){this.cachedDetection=void 0};GV.Html5CapabilityDetector.prototype._supportedMimeType='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';GV.Html5CapabilityDetector.prototype.isCapableOfPlaying=function(){if(typeof this.cachedDetection!="undefined")return this.cachedDetection;var a=document.createElement("video");return typeof a.canPlayType==="function"?this.cachedDetection=Boolean(a.canPlayType(this._supportedMimeType)==="probably"):this.cachedDetection=false};
GV.FlashCapabilityDetector=function(a){this.cachedDetection=void 0;this.minFlashVersion=a};GV.FlashCapabilityDetector.prototype.playerType=GV.PlayerType.FLASH;GV.FlashCapabilityDetector.prototype.isCapableOfPlaying=function(){if(typeof this.minFlashVersion=="undefined")throw Error("FlashCapabilityDetector needs minFlashVersion");return typeof this.cachedDetection!="undefined"?this.cachedDetection:this.cachedDetection=this.flashVersionMatch(this.minFlashVersion)};
GV.FlashCapabilityDetector.prototype.flashVersionMatch=function(a){var b=this.getFlashVersion(),a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?true:false};
GV.FlashCapabilityDetector.prototype.getFlashVersion=function(){var a=[0,0,0],b=null;if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object"){if((b=navigator.plugins["Shockwave Flash"].description)&&!(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-shockwave-flash"]&&!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin))b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(b.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(b.replace(/^.*\.(.*)\s.*$/,
"$1"),10),a[2]=/[a-zA-Z]/.test(b)?parseInt(b.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof window.ActiveXObject!="undefined")try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c&&(b=c.GetVariable("$version")))b=b.split(" ")[1].split(","),a=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)]}catch(d){}return a};GV.PlayerSupportDetector=function(){};
GV.PlayerSupportDetector.prototype.getSupportedPlayerTypes=function(a){if(!a)return[];var b=[];if(a.usesCustomTemplate)return b.push(GV.PlayerType.CUSTOM_TEMPLATE),b;a.flvUrl&&b.push(GV.PlayerType.FLASH);a.mp4Url&&b.push(GV.PlayerType.HTML5);return b};GV.PlayerPriorityResolver=function(){};
GV.PlayerPriorityResolver.prototype.resolveHighestPriority=function(a){if(!a||typeof a.length!=="number")throw Error("Player priority resolver must be passed types to resolve");if(a.indexOf(GV.PlayerType.FLASH)>-1)return GV.PlayerType.FLASH;else if(a.indexOf(GV.PlayerType.HTML5)>-1)return GV.PlayerType.HTML5;return null};GV.PlayerSelector=function(a,b){this.playerSupportDetector=a;this.playerPriorityResolver=b;this._detectors={};this._logger=GV.Utils.Logger};
GV.PlayerSelector.prototype.addCapabilityDetector=function(a,b){this._detectors[a]=b};
GV.PlayerSelector.prototype.getPlayerTypeForVideo=function(a){if(!this.playerSupportDetector||typeof this.playerSupportDetector.getSupportedPlayerTypes!=="function")throw Error("Player selector needs a valid player support detector");if(this._detectors.length===0||!a)return null;var a=this.playerSupportDetector.getSupportedPlayerTypes(a),b=[];if(a&&a.length)for(var c=0;c<a.length;c++){var d=a[c];this._detectors[d]&&this._detectors[d].isCapableOfPlaying()&&b.push(d)}if(b.length>1){if(GV.Utils.QueryString.getParameters(window.location.href).forceHTML5Player)return GV.PlayerType.HTML5;
if(!this.playerPriorityResolver||typeof this.playerPriorityResolver.resolveHighestPriority!=="function")throw Error("Player selector needs a valid player priority resolver");return this.playerPriorityResolver.resolveHighestPriority(b)}else if(b.length===1)return b[0];return null};GV.VideoPromoter=function(){this._lastPromotedIndex=void 0};GV.VideoPromoter.prototype._restoreLastPromotedVideo=function(a,b){var c=b.shift();b.splice(a,0,c);this._lastPromotedIndex=void 0};
GV.VideoPromoter.prototype.promoteById=function(a,b){if(a&&b&&b.length){var c=void 0;this._lastPromotedIndex&&this._restoreLastPromotedVideo(this._lastPromotedIndex,b);for(var d=0;d<b.length;d++)if(b[d].videoId===a){if(d>0)this._lastPromotedIndex=d,c=b.splice(d,1);break}c&&b.unshift(c[0])}};
GV.PlayerPresentationStrategy=function(a,b,c,d,e){this.landingPage=a;this.playerSelector=b;this.playerFactory=c;this.videoPromoter=d;this.playerObservers=e;this.currentPlayer=this.currentEnvironment=void 0;this.subscribe("PlayerEmbedFailed",this._onPlayerEmbedFailed);this.subscribe("PlayerElementFound",this._onPlayerElementFound);this.subscribe("VideoSelected",this._onVideoSelected)};GV.Utils.makeObserver.call(GV.PlayerPresentationStrategy.prototype);GV.Utils.makeObservable.call(GV.PlayerPresentationStrategy.prototype);
GV.PlayerPresentationStrategy.prototype._isValidLandingPage=function(a){return a&&typeof a.render==="function"};GV.PlayerPresentationStrategy.prototype._isValidPlayerSelector=function(a){return a&&typeof a.getPlayerTypeForVideo==="function"};GV.PlayerPresentationStrategy.prototype._isValidPlayerFactory=function(a){return a&&typeof a.getInstance==="function"};GV.PlayerPresentationStrategy.prototype._isValidVideoPromoter=function(a){return a&&typeof a.promoteById==="function"};
GV.PlayerPresentationStrategy.prototype._onPlayerEmbedFailed=function(a){this.notifyObservers("PresentationFailed",a.data)};
GV.PlayerPresentationStrategy.prototype._onPlayerElementFound=function(a){if(a&&a.data){var b=this.currentEnvironment.videos[0],c=this.playerSelector.getPlayerTypeForVideo(b);c?(c=this.playerFactory.getInstance(c))?(this.currentPlayer=c,c.registerObserver(this),this.playerObservers&&this._registerPlayerObservers(c,this.currentEnvironment.placement,this.currentEnvironment.view),c.embed(a.data,b,this.currentEnvironment.placement,this.currentEnvironment.view)):(this.notifyObservers("CannotPlayVideo"),
this.currentPlayer=null):this.notifyObservers("CannotPlayVideo")}};GV.PlayerPresentationStrategy.prototype._registerPlayerObservers=function(a,b,c){for(var d=a.getPlayerInfo(),e=0;e<this.playerObservers.length;e++){var f=this.playerObservers[e];f.init();d&&typeof f.setPlayerInfo==="function"&&f.setPlayerInfo(d);b&&typeof f.setPlacement==="function"&&f.setPlacement(b);c&&typeof f.setView==="function"&&f.setView(c);a.registerObserver(f)}};
GV.PlayerPresentationStrategy.prototype._onVideoSelected=function(a){if(!this._isValidVideoPromoter(this.videoPromoter))throw Error("Player presentation strategy needs a video promoter");if(a=a&&a.data?a.data:void 0)this.videoPromoter.promoteById(a,this.currentEnvironment.videos),this.currentEnvironment.view.autoPlay=true,this.currentPlayer&&typeof this.currentPlayer.cleanUp==="function"&&this.currentPlayer.cleanUp(),this.present(this.currentEnvironment)};
GV.PlayerPresentationStrategy.prototype.present=function(a){if(!this._isValidLandingPage(this.landingPage)||!this._isValidPlayerSelector(this.playerSelector)||!this._isValidPlayerFactory(this.playerFactory)||!a||!a.videos||a.videos.length===0)throw Error("Video player needs a landing page, player selector, factory and at least one video");this.currentEnvironment=a;this.landingPage.registerObserver(this);this.landingPage.applyStyle(a.placement.pageStyle);this.landingPage.render(GV.RenderType.PLAYER,
a.videos)};GV.FallbackServiceValidator=function(){};GV.FallbackServiceValidator.prototype._invalidValues=["Placement version ID value is invalid","Fallback not found"];GV.FallbackServiceValidator.prototype.isValid=function(a){if(!a)return false;for(var b=0;b<this._invalidValues.length;b++)if(a===this._invalidValues[b])return false;return true};
GV.FallbackPresentationStrategy=function(a,b,c,d,e){this.landingPage=a;this.fallbackService=b;this.validator=c;this.embedder=d;this.fallbackObservers=e;this.currentEnvironment=void 0;this.subscribe("FallbackElementFound",this._onFallbackElementFound)};GV.Utils.makeObserver.call(GV.FallbackPresentationStrategy.prototype);GV.Utils.makeObservable.call(GV.FallbackPresentationStrategy.prototype);GV.FallbackPresentationStrategy.prototype._isValidLandingPage=function(a){return a&&typeof a.render==="function"};
GV.FallbackPresentationStrategy.prototype._isValidFallbackService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};GV.FallbackPresentationStrategy.prototype._isValidValidator=function(a){return a&&typeof a.isValid==="function"};GV.FallbackPresentationStrategy.prototype._isValidEmbedder=function(a){return a&&typeof a.embed==="function"};GV.FallbackPresentationStrategy.prototype._isUsableEnvironmentalData=function(a){return a&&a.placement.placementVersionId};
GV.FallbackPresentationStrategy.prototype._onFallbackElementFound=function(a){this.currentState=new GV.Data.PlayerState;this.currentState.video=this.currentEnvironment.videos[0]||{};this.currentState.video.gvTrackingEvents=this.currentState.video.gvTrackingEvents||{};this.currentState.percentElapsed=0;this.currentState.video.gvTrackingEvents.hasNoPayableVideos=new GV.Data.GoviralTrackingEvent("hasNoPayableVideos","111");this.fallbackObservers&&this._registerFallbackObservers(this.currentEnvironment.placement,
this.currentEnvironment.view);var b=a.data;this.currentEnvironment&&b&&(a=this.fallbackService.newRequest().withParameter("placementVersionId",this.currentEnvironment.placement.placementVersionId),b=this._finishPresentation.bind(this,b),this.fallbackService.makeRequest(a,b))};
GV.FallbackPresentationStrategy.prototype._registerFallbackObservers=function(a,b){for(var c=0;c<this.fallbackObservers.length;c++){var d=this.fallbackObservers[c];d.init();a&&typeof d.setPlacement==="function"&&d.setPlacement(a);b&&typeof d.setView==="function"&&d.setView(b);this.registerObserver(d)}};GV.FallbackPresentationStrategy.prototype._handleError=function(a){this.notifyObservers("PresentationFailed",a)};
GV.FallbackPresentationStrategy.prototype._finishPresentation=function(a,b,c){b?this._handleError(new GV.Data.Error(GV.ErrorCode.FALLBACK_HTML_SERVICE_CALL_FAILED)):this.validator.isValid(c)?(this.embedder.setHtmlSnippet(c),this.embedder.embed(a),this.notifyObservers("Player.hasNoPayableVideos",this.currentState)):this._handleError(new GV.Data.Error(GV.ErrorCode.FALLBACK_HTML_SERVICE_CALL_INVALID))};
GV.FallbackPresentationStrategy.prototype.present=function(a){if(!this._isValidLandingPage(this.landingPage)||!this._isValidFallbackService(this.fallbackService)||!this._isValidValidator(this.validator)||!this._isValidEmbedder(this.embedder)||!this._isUsableEnvironmentalData(a))throw Error("Strategy needs a landing page, fallback service, validator, embedder and environmental data");this.currentEnvironment=a;this.landingPage.registerObserver(this);this.landingPage.applyStyle(a.placement.pageStyle);
this.landingPage.render(GV.RenderType.FALLBACK)};GV.ErrorPresentationStrategy=function(a){this.landingPage=a};GV.ErrorPresentationStrategy.prototype._isValidLandingPage=function(a){return a&&typeof a.render==="function"};GV.ErrorPresentationStrategy.prototype.setError=function(a){this._error=a};
GV.ErrorPresentationStrategy.prototype.present=function(a){if(!this._isValidLandingPage(this.landingPage))throw Error("Strategy needs a landing page");if(!this._error||typeof this._error.code!=="number")throw Error("Strategy needs an error");this.landingPage.applyStyle(a.placement.pageStyle);this.landingPage.render(GV.RenderType.ERROR,this._error.code)};GV.BlacklistedPresentationStrategy=function(a){this.landingPage=a};
GV.BlacklistedPresentationStrategy.prototype._isValidLandingPage=function(a){return a&&typeof a.render==="function"};GV.BlacklistedPresentationStrategy.prototype.present=function(a){if(!this._isValidLandingPage(this.landingPage))throw Error("Strategy needs a landing page");this.landingPage.applyStyle(a.placement.pageStyle);this.landingPage.render(GV.RenderType.ERROR,GV.ErrorCode.BLACKLISTED)};GV.NoVideosPresentationStrategy=function(a){this.landingPage=a};
GV.NoVideosPresentationStrategy.prototype._isValidLandingPage=function(a){return a&&typeof a.render==="function"};GV.NoVideosPresentationStrategy.prototype.present=function(a){if(!this._isValidLandingPage(this.landingPage))throw Error("Strategy needs a landing page");this.landingPage.applyStyle(a.placement.pageStyle);this.landingPage.render(GV.RenderType.ERROR,GV.ErrorCode.BROWSER_INCAPABLE_OF_PLAYING_VIDEOS)};GV.FallbackBehaviour={PLAY_NON_PAYING_VIDEOS:"video",SHOW_FALLBACK_HTML:"html"};
GV.PresentationStrategyType={PLAYER:0,FALLBACK:1,ERROR:2,BLACKLISTED:3,NO_VIDEOS:4};GV.PresentationStrategySelector=function(){};GV.PresentationStrategySelector.prototype._isAtLeastOnePayingVideo=function(a){for(var b=0,c=a.length;b<c;b++)if(a[b].isPaying)return true;return false};
GV.PresentationStrategySelector.prototype.selectStrategy=function(a,b){return b?GV.PresentationStrategyType.ERROR:a?a.placement.isBlacklisted?GV.PresentationStrategyType.BLACKLISTED:a.placement.fallbackBehaviour===GV.FallbackBehaviour.SHOW_FALLBACK_HTML&&!this._isAtLeastOnePayingVideo(a.videos)?GV.PresentationStrategyType.FALLBACK:a.videos.length===0?GV.PresentationStrategyType.NO_VIDEOS:GV.PresentationStrategyType.PLAYER:null};
GV.Presenter=function(a,b){this.strategySelector=a;this.strategyFactory=b;this._error=this._currentEnvironment=void 0;this._hasPresentedError=false;this.subscribe("PresentationFailed",this._onPresentationFailed)};GV.Utils.makeObserver.call(GV.Presenter.prototype);GV.Presenter.prototype._isValidStrategySelector=function(a){return a&&typeof a.selectStrategy==="function"};GV.Presenter.prototype._isValidFactory=function(a){return a&&typeof a.getInstance==="function"};
GV.Presenter.prototype.setError=function(a){this._error=a};GV.Presenter.prototype.setDiagnosticsClient=function(a){this._diagnosticsClient=a};GV.Presenter.prototype._onPresentationFailed=function(a){if(a&&a.data&&!this._hasPresentedError){var b=(a=a.data)&&a.message?a.message:"";if(a.code)this._error=a,this.present(this._currentEnvironment,this._error),this._hasPresentedError=true,this._diagnosticsClient.submitReport(a,b,this._currentEnvironment,function(){})}};
GV.Presenter.prototype.present=function(a){if(!this._isValidStrategySelector(this.strategySelector)||!this._isValidFactory(this.strategyFactory))throw Error("Presenter needs a strategy selector and factory");this._currentEnvironment=a;var b=this.strategyFactory.getInstance(this.strategySelector.selectStrategy(a,this._error));this._error&&typeof b.setError==="function"&&b.setError(this._error);GV.Utils.isObservable(b)&&b.registerObserver(this);b.present(a)};
GV.CapabilityFilter=function(a){this.playerSupportDetector=a;this._detectors={}};GV.CapabilityFilter.prototype.addCapabilityDetector=function(a,b){this._detectors[a]=b};GV.CapabilityFilter.prototype._isValidPlayerSupportDetector=function(a){return a&&typeof a.getSupportedPlayerTypes==="function"};GV.CapabilityFilter.prototype._hasAtLeastOneCapabilityDetector=function(){for(var a in this._detectors)if(this._detectors.hasOwnProperty(a))return true;return false};
GV.CapabilityFilter.prototype._isUsableEnvironmentalData=function(a){return a&&a.videos};GV.CapabilityFilter.prototype.filter=function(a){if(!this._isValidPlayerSupportDetector(this.playerSupportDetector)||!this._hasAtLeastOneCapabilityDetector(this._detectors)||!this._isUsableEnvironmentalData(a))throw Error("Filter needs a player support detector and at least one capability detector");for(var b=[],c=0,d=a.videos.length;c<d;c++)this._isVideoPlayable(a.videos[c])&&b.push(a.videos[c]);a.videos=b};
GV.CapabilityFilter.prototype._isVideoPlayable=function(a){if((a=this.playerSupportDetector.getSupportedPlayerTypes(a))&&a.length)for(var b=0;b<a.length;b++){var c=a[b];if(this._detectors[c]&&this._detectors[c].isCapableOfPlaying())return true}return false};GV.Ajax.RequestTypeResolver=function(){};GV.Ajax.RequestTypeResolver.prototype._browserSupportsCors=function(){return window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest};
GV.Ajax.RequestTypeResolver.prototype._translateToRequestType=function(a){for(var b in GV.External.RequestType)if(GV.External.RequestType.hasOwnProperty(b)&&a===GV.External.RequestType[b])return GV.External.RequestType[b];return null};GV.Ajax.RequestTypeResolver.prototype.getRequestType=function(a,b){if(!a)throw Error("Request type resolver needs a valid data format");return!b||this._browserSupportsCors()?this._translateToRequestType(a):GV.External.RequestType.JSONP};
GV.Ajax.ReqwestOptionsFormatter=function(a){this.serviceRequestTimeout=a};GV.Ajax.ReqwestOptionsFormatter.prototype.getOptions=function(a,b,c,d,e,f,g){var h={};a&&(h.url=a);b&&(h.type=b);typeof c!=="undefined"&&c!==null&&(h.crossOrigin=c);typeof d!=="undefined"&&d!==null&&(h.withCredentials=d);e&&(h.jsonpCallbackName=e);f&&(h.success=f);g&&(h.error=g);if(typeof this.serviceRequestTimeout!=="undefined")h.timeout=this.serviceRequestTimeout;return h};
GV.Ajax.ReqwestAjaxClient=function(a,b){this.requestTypeResolver=a;this.optionsFormatter=b};GV.Ajax.ReqwestAjaxClient.prototype._isValidRequestTypeResolver=function(a){return a&&typeof a.getRequestType==="function"};GV.Ajax.ReqwestAjaxClient.prototype._isValidOptionsFormatter=function(a){return a&&typeof a.getOptions==="function"};GV.Ajax.ReqwestAjaxClient.prototype._isRequestForUrlCrossOrigin=function(a){return GV.Utils.Url.getDomain(window.location.href)!==GV.Utils.Url.getDomain(a)};
GV.Ajax.ReqwestAjaxClient.prototype._getSuccessCallback=function(a){return function(b){a.resolve(b)}};GV.Ajax.ReqwestAjaxClient.prototype._getFailureCallback=function(a){return function(b){a.reject(b)}};
GV.Ajax.ReqwestAjaxClient.prototype.get=function(a,b){if(!this._isValidRequestTypeResolver(this.requestTypeResolver)||!this._isValidOptionsFormatter(this.optionsFormatter))throw Error("AJAX client needs a valid request type resolver and options formatter");var c=a.getDataFormat(),d=this._isRequestForUrlCrossOrigin(a.getUrl()),c=this.requestTypeResolver.getRequestType(c,d);try{a.withRequestType(c)}catch(e){throw Error("External resource does not support '"+c+"' requests");}var f=a.getUrl(),g=a.getCallbackName(),
h=a.getUsesCookies(),k,j;typeof b==="function"&&(k=function(a){b(null,a)},j=b);d=this.optionsFormatter.getOptions(f,c,d,h,g,k,j);/MSIE/.test(navigator.userAgent)&&(d.url+="&ts="+(new Date).getTime());reqwest(d)};GV.External.DataFormat={JSON:"json",HTML:"html",NONE:"none"};GV.External.RequestType={HTML:"html",JSON:"json",JSONP:"jsonp",PING:"ping"};GV.External.PingClient=function(){};
GV.External.PingClient.prototype.get=function(a){if(!a||typeof a.getUrl!=="function")throw Error("Unidirectional request client needs a service request");(new Image).src=a.getUrl()};GV.External.PlaceholderedUrl=function(a){this.url=a;this.stringFormatter=void 0};
GV.External.PlaceholderedUrl.prototype.getUrlForParameters=function(a){if(!this.url)return null;var b=this.url;if(!a)return b;if(!this.stringFormatter)this.stringFormatter=new GV.Utils.StringFormatter("{{","}}");var c=this.stringFormatter.format(b,a);b.match(/(Playlist)/)&&a.sapMode=="true"&&(c=c.replace(/dynamic/,"static"),c=c.replace(/cw\=\d+/,""));a.sapMode!="true"&&/dynamicPlaylist/.test(c)&&(c=c.replace(/videoID\=0\&/,""));return"https:"==document.location.protocol?c.replace(/^http\:/,"https:"):
c};GV.External.ServiceRequest=function(){this.usesCookies=false;this.parameters={}};GV.External.ServiceRequest.prototype._getParameters=function(){return this.parameters};GV.External.ServiceRequest.prototype.setService=function(a){this.service=a};GV.External.ServiceRequest.prototype.getDataFormat=function(){if(!this.service||!this.service.dataFormat)throw Error("Request needs access to its originating service");return this.service.dataFormat};
GV.External.ServiceRequest.prototype.getCallbackName=function(){if(!this.service)throw Error("Request needs access to its originating service");return this.service.callbackName};GV.External.ServiceRequest.prototype.getUsesCookies=function(){return this.usesCookies};GV.External.ServiceRequest.prototype.getUrl=function(){if(!this.service||!this.service.url||typeof this.service.url.getUrlForParameters!=="function")throw Error("Request needs access to its originating service");return this.service.url.getUrlForParameters(this._getParameters())};
GV.External.ServiceRequest.prototype.withCookies=function(){this.usesCookies=true;return this};GV.External.ServiceRequest.prototype.withParameter=function(a,b){a&&(this.parameters[a]=encodeURIComponent(b));return this};
GV.External.ServiceRequest.prototype.withRequestType=function(a){if(a){if(!this.service||typeof this.service.isRequestTypeSupported!=="function")throw Error("Request needs access to its originating service");if(this.service.isRequestTypeSupported(a))this.withParameter("requestType",a);else throw Error("Unsupported request type");}return this};
GV.External.Service=function(a,b,c,d){this.requestClient=a;this.requestInitFunction=b;this.dataFormat=c;this.supportedRequestTypes=d;this.callbackName=this.url=void 0};GV.External.Service.prototype.setUrl=function(a){this.url=a};GV.External.Service.prototype.setCallbackName=function(a){this.callbackName=a};GV.External.Service.prototype._isValidRequestClient=function(a){return a&&typeof a.get==="function"};
GV.External.Service.prototype._isValidUrl=function(a){return a&&typeof a.getUrlForParameters==="function"};GV.External.Service.prototype._isValidRequest=function(a){return a&&typeof a.getUrl==="function"};GV.External.Service.prototype.isRequestTypeSupported=function(a){if(!this.supportedRequestTypes||!this.supportedRequestTypes.length)throw Error("External service needs supported request types");return this.supportedRequestTypes.indexOf(a)>-1};
GV.External.Service.prototype.makeRequest=function(a,b){if(!this._isValidRequestClient(this.requestClient)||!this.dataFormat||!this._isValidRequest(a))throw Error("External service needs a request client, data format and request");this.requestClient.get(a,b)};
GV.External.Service.prototype.newRequest=function(){if(!this.requestInitFunction||typeof this.requestInitFunction!=="function")throw Error("External service needs a request initialisation function");var a=new this.requestInitFunction;a.setService(this);return a};
GV.GvTracker=function(a){this._tracker=a;this._videoId=null;this._pingVolume=1;this._reqCache={};this._player={impression:false,play:false,replay:false,viewThrough20:false,viewThrough40:false,viewThrough60:false,viewThrough80:false,viewThrough100:false,end:false}};GV.Utils.makeObserver.call(GV.GvTracker.prototype);GV.GvTracker.prototype.setPlacement=function(a){this.placement=a};GV.GvTracker.prototype.setView=function(a){this.view=a};
GV.GvTracker.prototype.setPlayerInfo=function(a){this.playerInfo=a};GV.GvTracker.prototype._pingVolume="1";
GV.GvTracker.prototype.init=function(){var a=this;this.subscribe("Player.impression",function(b){b=b.data;a.checkVideoChange(b.video.videoId);if(!a._player.impression)a._player.impression=true,a._track("impression",b)});this.subscribe("Player.play",function(b){b=b.data;if(!a._player.play)a._player.play=true,a._track("play",b)});this.subscribe("Player.redirect",function(b){a._track("redirect",b.data)});this.subscribe("Player.end",function(b){b=b.data;if(!a._player.end)a._player.end=true,a._track("end",
b)});this.subscribe("Player.replay",function(b){a._track("replay",b.data);a.reset({impression:a._player.impression,play:a._player.play})});this.subscribe("Player.progress",function(b){var b=b.data,c=Math.ceil(b.percentElapsed*100);if(c==20&&!a._player.viewThrough20)a._player.viewThrough20=true,a._track("viewThrough20",b);if(c==40&&!a._player.viewThrough40)a._player.viewThrough40=true,a._track("viewThrough40",b);if(c==60&&!a._player.viewThrough60)a._player.viewThrough60=true,a._track("viewThrough60",
b);if(c==80&&!a._player.viewThrough80)a._player.viewThrough80=true,a._track("viewThrough80",b);if(c>=99&&!a._player.viewThrough100)a._player.viewThrough100=true,a._track("viewThrough100",b);if(c==95&&!a._player.end)a._player.end=true,a._track("end",b)});this.subscribe("Player.hasNoPayableVideos",function(b){a._track("hasNoPayableVideos",b.data)})};
GV.GvTracker.prototype.checkVideoChange=function(a){if(this._videoId===null)this._videoId=a;if(this._videoId!=a)this._videoId=a,this.reset({impression:false,play:false}),this._reqCache={}};GV.GvTracker.prototype.reset=function(a){a.replay=false;a.viewThrough20=false;a.viewThrough40=false;a.viewThrough60=false;a.viewThrough80=false;a.viewThrough100=false;a.end=false;this._player=a};GV.GvTracker.prototype._track=function(a,b){var c=this._getReq(a,b);c.withParameter("ts",(new Date).getTime());this._tracker.makeRequest(c)};
GV.GvTracker.prototype._getReq=function(a,b){if(this._reqCache[a])return this._reqCache[a];else{var c=this._initReq(b);c.withParameter("type",b.video.gvTrackingEvents[a].trackerIdValue);return this._reqCache[a]=c}};GV.GvTracker.prototype._initReq=function(a){var b=this._tracker.newRequest();b.withParameter("v",this._pingVolume);this._setVideoParameters(b,a);this._setPlayerInfoParameters(b);this._setPlacementParameters(b);this._setViewParameters(b);return b};
GV.GvTracker.prototype._setVideoParameters=function(a,b){a.withParameter("videoID",b.video.videoId).withParameter("a",b.video.campaignId)};
GV.GvTracker.prototype._setPlayerInfoParameters=function(a){var b=this.playerInfo&&this.playerInfo.playerType?this.playerInfo.playerType:"";a.withParameter("version",this.playerInfo&&this.playerInfo.version?this.playerInfo.version:"").withParameter("playertype",b).withParameter("deliveryMethod",this.placement.deliveryMethod).withParameter("deliveryMethodVersion",this.placement.deliveryMethodVersion)};
GV.GvTracker.prototype._setPlacementParameters=function(a){var b=this.placement&&this.placement.publisherId?this.placement.publisherId:"",c=this.placement&&this.placement.publisherSubId?this.placement.publisherSubId:"";a.withParameter("cw",this.placement&&this.placement.contentWebsiteId?this.placement.contentWebsiteId:"").withParameter("pID",b).withParameter("psid",c)};
GV.GvTracker.prototype._setViewParameters=function(a){var b=this.view&&this.view.source?this.view.source:"";a.withParameter("r",this.view&&this.view.referrer?this.view.referrer:"").withParameter("s",b)};GV.PlayerEventsRecorder=function(a){this.storage=a};GV.Utils.makeObserver.call(GV.PlayerEventsRecorder.prototype);GV.PlayerEventsRecorder.prototype.init=function(){var a=this;this.subscribe("Player.impression",function(b){a._saveViewedVideos(b.data.video.videoId)})};
GV.PlayerEventsRecorder.prototype._saveViewedVideos=function(a){var b=this.storage.getViewedVideos(),c=[];a&&c.push(a);for(var d=0,e=b.length;d<e;d++)a!=b[d]&&c.push(b[d]);this.storage.setViewedVideos(c)};GV.ServeandtrackPlaylistValidator=function(){};GV.ServeandtrackPlaylistValidator.prototype.isValid=function(a){return Boolean(a&&!a.error)};GV.ServeandtrackPlaylistDataHandler=function(){};GV.ServeandtrackPlaylistDataHandler.prototype._parsePublisherId=function(a){return a.playlist.placement.publisherId.$v};
GV.ServeandtrackPlaylistDataHandler.prototype._parseIfVideoIsPaying=function(a){a=parseInt(a);return!isNaN(a)&&a>=0};
GV.ServeandtrackPlaylistDataHandler.prototype._parseVideo=function(a){var b=new GV.Data.Video;b.videoId=a.videoId;b.campaignId=a.campaignId;b.isPaying=this._parseIfVideoIsPaying(a.priority);b.title=a.appearance.title;b.usesCustomTemplate=Boolean(a.appearance.customTemplate==="1");if(a.appearance.sponsoredBy)b.sponsoredBy=this._parseSponsoredBy(a.appearance.sponsoredBy);if(a.appearance.screenClickthrough)b.clickthrough=this._parseClickthrough(a.appearance.screenClickthrough);if(a.tracking.gvTracking){b.gvTrackingEvents=
{};for(var c=0;c<a.tracking.gvTracking.length;c++){var d=this._parseGoviralTrackingEvent(a.tracking.gvTracking[c]);a.tracking.gvTracking[c]["@action"]=="viewThrough"?b.gvTrackingEvents[a.tracking.gvTracking[c]["@action"]+a.tracking.gvTracking[c]["@percentil"]]=d:b.gvTrackingEvents[a.tracking.gvTracking[c]["@action"]]=d}}if(a.tracking.genericTracking){b.thirdPartyTrackingEvents=[];for(c=0;c<a.tracking.genericTracking.length;c++)a.tracking.genericTracking[c].$v&&(d=this._parseThirdPartyTrackingEvent(a.tracking.genericTracking[c]),
b.thirdPartyTrackingEvents.push(d))}b.flvUrl=GV.Utils.Validators.url(a.files.flvUrl)?a.files.flvUrl:void 0;b.mp4Url=GV.Utils.Validators.url(a.files.mp4Url)?a.files.mp4Url:void 0;b.imageUrl=GV.Utils.Validators.url(a.files.thumbnailScreenshot)?a.files.thumbnailScreenshot:void 0;return b};GV.ServeandtrackPlaylistDataHandler.prototype._parseSponsoredBy=function(a){return new GV.Data.SponsoredBy(a.$v,a["@url"],a["@target"])};
GV.ServeandtrackPlaylistDataHandler.prototype._parseClickthrough=function(a){return new GV.Data.Clickthrough(a["@url"],a["@target"],Boolean(a["@active"]==="1"))};GV.ServeandtrackPlaylistDataHandler.prototype._parseGoviralTrackingEvent=function(a){var b=new GV.Data.GoviralTrackingEvent(a["@action"],a.$v);if(a["@percentil"])b.percentElapsed=parseInt(a["@percentil"]);return b};
GV.ServeandtrackPlaylistDataHandler.prototype._parseThirdPartyTrackingEvent=function(a){var b=a.$v.split("$");return new GV.Data.ThirdPartyTrackingEvent(a["@action"],b)};GV.ServeandtrackPlaylistDataHandler.prototype._addDataToEnvironment=function(a,b){if(a.playlist){b.placement.publisherId=this._parsePublisherId(a);b.playlist=window.playlist=a.playlist;for(var c,d=0;d<a.playlist.videos.length;d++)if(c=this._parseVideo(a.playlist.videos[d]),b.videos.push(c),b.placement.sapMode)break}};
GV.ServeandtrackPlaylistDataHandler.prototype.getData=function(a,b){if(!a||a.error||!b)throw Error("Playlist parser needs data and environmental data to amend");this._addDataToEnvironment(a,b)};GV.PlaylistClient=function(a,b,c){this.playlistService=a;this.playlistValidator=b;this.playlistDataHandler=c;this.resourceUrl=void 0};GV.PlaylistClient.prototype._isValidPlaylistService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};
GV.PlaylistClient.prototype._isValidPlaylistValidator=function(a){return a&&typeof a.isValid==="function"};GV.PlaylistClient.prototype._isValidPlaylistDataHandler=function(a){return a&&typeof a.getData==="function"};GV.PlaylistClient.prototype._isUsableEnvironmentalData=function(a){return a&&a.placement&&a.placement.contentWebsiteId};
GV.PlaylistClient.prototype._parsePlaylist=function(a,b,c,d){var e=null;c?(e=new GV.Data.Error(GV.ErrorCode.PLAYLIST_SERVICE_CALL_FAILED),e.message="There was an error fetching the playlist.",this.resourceUrl&&(e.message+=" URL: "+this.resourceUrl)):this.playlistValidator.isValid(d)?this.playlistDataHandler.getData(d,a):e=new GV.Data.Error(GV.ErrorCode.PLAYLIST_SERVICE_CALL_INVALID);b(e,a)};
GV.PlaylistClient.prototype.getPlaylist=function(a,b){if(!this._isValidPlaylistService(this.playlistService)||!this._isValidPlaylistValidator(this.playlistValidator)||!this._isValidPlaylistDataHandler(this.playlistDataHandler)||!this._isUsableEnvironmentalData(a))throw Error("Playlist client needs all parameters");var c=this.playlistService.newRequest().withCookies().withParameter("cw",a.placement.contentWebsiteId).withParameter("videoId",a.placement.videoId).withParameter("sapMode",a.placement.sapMode);
stringFormatter=new GV.Utils.StringFormatter("{{","}}");this.resourceUrl=stringFormatter.format(c.getUrl(),{requestType:this.playlistService.dataFormat});var d=this._parsePlaylist.bind(this,a,b);this.playlistService.makeRequest(c,d)};GV.BlacklistServiceDataValidator=function(){};GV.BlacklistServiceDataValidator.prototype.isValid=function(a){return Boolean(a&&!a.error&&typeof a.blacklisted!=="undefined")};GV.BlacklistServiceDataValidator.prototype.isBlacklisted=function(a){return Boolean(a&&a.blacklisted)};
GV.BlacklistClient=function(a,b){this.blacklistService=a;this.blacklistDataValidator=b};GV.BlacklistClient.prototype._isValidBlacklistService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};GV.BlacklistClient.prototype._isValidBlacklistDataValidator=function(a){return a&&typeof a.isBlacklisted==="function"};GV.BlacklistClient.prototype._isUsableEnvironmentalData=function(a){return a&&a.placement&&a.placement.contentWebsiteId&&a.view&&a.view.passOnSource};
GV.BlacklistClient.prototype._finishBlacklistCheck=function(a,b,c,d){c?b(null):this.blacklistDataValidator.isValid(d)?(a.placement.isBlacklisted=this.blacklistDataValidator.isBlacklisted(d),b(null)):(a=new GV.Data.Error(GV.ErrorCode.BLACKLIST_SERVICE_CALL_INVALID),b(a))};
GV.BlacklistClient.prototype.checkIfBlacklisted=function(a,b){if(!this._isValidBlacklistService(this.blacklistService)||!this._isValidBlacklistDataValidator(this.blacklistDataValidator)||!this._isUsableEnvironmentalData(a))throw Error("Blacklist client needs valid parameters");var c=GV.Utils.Url.getDomain(a.view.passOnSource),c=this.blacklistService.newRequest().withParameter("placementId",a.placement.contentWebsiteId).withParameter("placementUrl",c),d=this._finishBlacklistCheck.bind(this,a,b);this.blacklistService.makeRequest(c,
d)};GV.DiagnosticsServiceDataValidator=function(){};GV.DiagnosticsServiceDataValidator.prototype.isValid=function(a){return!a?false:true};GV.DiagnosticsServiceDataValidator.prototype.isSent=function(){return true};GV.DiagnosticsClient=function(a,b){this.diagnosticsService=a;this.diagnosticsDataValidator=b};GV.DiagnosticsClient.prototype._isValidDiagnosticsService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};
GV.DiagnosticsClient.prototype._isValidDiagnosticsDataValidator=function(a){return a&&typeof a.isSent==="function"};GV.DiagnosticsClient.prototype._isUsableEnvironmentalData=function(a){return a&&a.placement};GV.DiagnosticsClient.prototype._finishDiagnosticsCheck=function(a,b){b(null)};
GV.DiagnosticsClient.prototype._submitable=function(a){return typeof a!=="undefined"&&a!==null&&typeof a.code!=="undefined"&&a.code!=GV.ErrorCode.BROWSER_INCAPABLE_OF_PLAYING_VIDEOS&&a.code!=GV.ErrorCode.BLACKLISTED&&!isNaN(parseInt(a.code))?true:false};
GV.DiagnosticsClient.prototype.submitReport=function(a,b,c,d){if(!this._isValidDiagnosticsService(this.diagnosticsService)||!this._isValidDiagnosticsDataValidator(this.diagnosticsDataValidator)||!this._isUsableEnvironmentalData(c)||!this._submitable(a))throw Error("Diagnostics client needs valid parameters");var e=GV.Utils.Url.getDomain(c.view.passOnSource),f=0;if(c.videos&&c.videos.length!==0&&typeof c.videos[0].videoId!="undefined")f=c.videos[0].videoId;a=this.diagnosticsService.newRequest().withParameter("ts",
Math.round((new Date).getTime()/1E3)).withParameter("cw",c.placement.contentWebsiteId).withParameter("pID",c.placement.publisherId||0).withParameter("placementUrl",e).withParameter("error",a.code).withParameter("errorMsg",b).withParameter("videoID",f).withParameter("version",1).withParameter("userAgent",navigator.userAgent).withParameter("placementType",c.placement.deliveryMethod);c=this._finishDiagnosticsCheck.bind(this,c,d);this.diagnosticsService.makeRequest(a,c)};
GV.TrackingUrlPlaceholderReplacer=function(){this.stringFormatter=void 0};GV.TrackingUrlPlaceholderReplacer.prototype._parameters={TIMESTAMP:function(){return(new Date).getTime().toString()}};
GV.TrackingUrlPlaceholderReplacer.prototype.replacePlaceholders=function(a){if(typeof a!=="string")return null;if(!this.stringFormatter)this.stringFormatter=new GV.Utils.StringFormatter("%%");var b={},c;for(c in this._parameters)this._parameters.hasOwnProperty(c)&&(b[c]=typeof this._parameters[c]==="function"?this._parameters[c].call(void 0):this._parameters[c]);return this.stringFormatter.format(a,b)};GV.ThirdPartyTrackingRequest=function(a){this.trackingUrlPlaceholderReplacer=a};
GV.Utils.inherits(GV.ThirdPartyTrackingRequest,GV.External.ServiceRequest);GV.ThirdPartyTrackingRequest.prototype._isValidPlaceholderReplacer=function(a){return a&&typeof a.replacePlaceholders==="function"};GV.ThirdPartyTrackingRequest.prototype.getUrl=function(){if(!this.dynamicUrl)throw Error("Request needs a URL");return this._isValidPlaceholderReplacer(this.trackingUrlPlaceholderReplacer)?this.trackingUrlPlaceholderReplacer.replacePlaceholders(this.dynamicUrl):this.dynamicUrl};
GV.ThirdPartyTrackingRequest.prototype.withDynamicUrl=function(a){this.dynamicUrl=a;return this};GV.ThirdPartyTracker=function(a){this.trackingService=a};GV.Utils.makeObserver.call(GV.ThirdPartyTracker.prototype);GV.ThirdPartyTracker.prototype._isValidTrackingService=function(a){return a&&typeof a.newRequest==="function"&&typeof a.makeRequest==="function"};
GV.ThirdPartyTracker.prototype._namesToTypes={"Player.impression":"impression","Player.play":"play","Player.replay":"play","Player.end":"end","Player.redirect":"redirect"};GV.ThirdPartyTracker.prototype._mapEventTypeToTrackingEventType=function(a){if(a)return this._namesToTypes[a]};GV.ThirdPartyTracker.prototype._getTrackingEvents=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];e.actionType===b&&c.push(e)}return c.length>0?c:null};
GV.ThirdPartyTracker.prototype._makeTrackingRequest=function(a){for(var b=0;b<a.urls.length;b++)this.trackingService.makeRequest(this.trackingService.newRequest().withDynamicUrl(a.urls[b]))};GV.ThirdPartyTracker.prototype._trackEvent=function(a){if(this.trackingService&&a&&a.type){var b=this._mapEventTypeToTrackingEventType(a.type);if(a.data&&a.data.video&&a.data.video.thirdPartyTrackingEvents)for(a=this._getTrackingEvents(a.data.video.thirdPartyTrackingEvents,b);a&&a.length;)this._makeTrackingRequest(a.shift())}};
GV.ThirdPartyTracker.prototype.init=function(){if(!this._isValidTrackingService(this.trackingService))throw Error("Tracker needs a tracking service");var a=this._trackEvent.bind(this);this.subscribe("Player.impression",a);this.subscribe("Player.play",a);this.subscribe("Player.replay",a);this.subscribe("Player.end",a);this.subscribe("Player.redirect",a)};GV.Tasks.AsyncSeries=function(){this._tasks=[];this._callback=void 0};
GV.Tasks.AsyncSeries.prototype._addTask=function(a){typeof a==="function"&&this._tasks.push(a)};GV.Tasks.AsyncSeries.prototype.withTasks=function(a){if(a)if(Array.isArray(a))if(a.length===1)this._addTask(a[0]);else{if(a.length>1)for(var b=0,c=a.length;b<c;b++)this._addTask(a[b])}else this._addTask(a);return this};GV.Tasks.AsyncSeries.prototype.withCallback=function(a){if(typeof a==="function")this._callback=a;return this};
GV.Tasks.AsyncSeries.prototype.execute=function(){async&&typeof async.series==="function"&&this._tasks&&this._tasks.length&&async.series(this._tasks,this._callback)};GV.PlayerContainer=function(a,b,c,d,e,f,g){this.taskSeries=a;this.dataHandler=b;this.blacklistClient=c;this.playlistClient=d;this.videoFilterer=e;this.presenter=f;this.diagnosticsClient=g};
GV.PlayerContainer.prototype._isValidTaskSeries=function(a){return a&&typeof a.withTasks==="function"&&typeof a.withCallback==="function"&&typeof a.execute==="function"};GV.PlayerContainer.prototype._isValidDataHandler=function(a){return a&&typeof a.getData==="function"};GV.PlayerContainer.prototype._isValidBlacklistClient=function(a){return a&&typeof a.checkIfBlacklisted==="function"};GV.PlayerContainer.prototype._isValidPlaylistClient=function(a){return a&&typeof a.getPlaylist==="function"};
GV.PlayerContainer.prototype._isValidVideoFilterer=function(a){return a&&typeof a.filter==="function"};GV.PlayerContainer.prototype._isValidPresenter=function(a){return a&&typeof a.present==="function"&&typeof a.setError==="function"};GV.PlayerContainer.prototype._isValidDiagnosticsClient=function(a){return a&&typeof a.submitReport==="function"};
GV.PlayerContainer.prototype.init=function(){if(!this._isValidTaskSeries(this.taskSeries)||!this._isValidDataHandler(this.dataHandler)||!this._isValidPlaylistClient(this.playlistClient)||!this._isValidPresenter(this.presenter))throw Error("Player container needs a task series, data handler, playlist client and presenter");var a=new GV.Data.Environment,b=[this.dataHandler.getData.bind(this.dataHandler,a)];this._isValidBlacklistClient(this.blacklistClient)&&b.push(this.blacklistClient.checkIfBlacklisted.bind(this.blacklistClient,
a));var c=this.playlistClient;b.push(function(b){a.placement.isBlacklisted?b(null,a):c.getPlaylist(a,b)});var d=this.videoFilterer;this._isValidVideoFilterer(d)&&b.push(function(b){a.placement.isBlacklisted?b(null,a):d.filter(a,b)});var e=this.presenter,f=this.diagnosticsClient;this.taskSeries.withTasks(b).withCallback(function(b){var c=b&&b.message?b.message:"";b&&(e.setError(b),f.submitReport(b,c,a,function(){}));e.present(a)}).execute()};
GV.DependencyInjectionContainer=function(){var a,b={},c={},d=function(e){var f=null;if(c[e]){var g=c[e];if(g.singleton&&b[e])return b[e];if(g.value)return g.value;else if(g.config){if(a&&a[g.config])return a[g.config]}else if(g.concrete)f=new g.concrete;else if(g.init){f=[];if(g.deps)if(typeof g.deps==="string")f[0]=d(g.deps);else if(g.deps.length)for(var h=0;h<g.deps.length;h++)f[h]=d(g.deps[h]);f=g.init.apply(void 0,f)}g.singleton&&(b[e]=f)}return f};return{getInstance:d,setConfiguration:function(b){a=
b},setDependencies:function(a){c=a}}}();
GV.DependencyInjectionContainer.setDependencies({"player-container":{deps:"task-series,initial-data-handler,blacklist-client,playlist-client,video-filters,presenter,diagnostics-client".split(","),init:function(a,b,c,d,e,f,g){return new GV.PlayerContainer(a,b,c,d,e,f,g)}},"task-series":{concrete:GV.Tasks.AsyncSeries},"initial-data-handler":{concrete:GV.UrlDataHandler},"blacklist-client":{deps:["blacklist-service","blacklist-data-validator"],init:function(a,b){return new GV.BlacklistClient(a,b)}},"blacklist-service":{deps:["ajax-client",
"external-service-request-init","blacklist-url","blacklist-callback-name"],init:function(a,b,c,d){a=new GV.External.Service(a,b,GV.External.DataFormat.JSON,[GV.External.RequestType.JSON,GV.External.RequestType.JSONP]);a.setUrl(c);a.setCallbackName(d);return a}},"ajax-client":{deps:["ajax-request-type-resolver","ajax-options-formatter"],init:function(a,b){return new GV.Ajax.ReqwestAjaxClient(a,b)},singleton:true},"ajax-request-type-resolver":{concrete:GV.Ajax.RequestTypeResolver},"service-request-timeout":{config:"serviceRequestTimeout"},
"ajax-options-formatter":{deps:"service-request-timeout",init:function(a){return new GV.Ajax.ReqwestOptionsFormatter(a)}},"external-service-request-init":{init:function(){return function(){return new GV.External.ServiceRequest}},singleton:true},"blacklist-service-url":{config:"blacklistServiceUrl"},"blacklist-url":{deps:"blacklist-service-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},"blacklist-callback-name":{config:"blacklistServiceCallbackName"},"blacklist-data-validator":{concrete:GV.BlacklistServiceDataValidator},
"playlist-client":{deps:["playlist-service","playlist-validator","playlist-data-handler"],init:function(a,b,c){return new GV.PlaylistClient(a,b,c)}},"playlist-service":{deps:["ajax-client","external-service-request-init","playlist-url","playlist-callback-name"],init:function(a,b,c,d){a=new GV.External.Service(a,b,GV.External.DataFormat.JSON,[GV.External.RequestType.JSON,GV.External.RequestType.JSONP]);a.setUrl(c);a.setCallbackName(d);return a}},"playlist-url":{deps:"serveandtrack-playlist-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},
"serveandtrack-playlist-url":{config:"serveandtrackPlaylistUrl"},"playlist-callback-name":{config:"serveandtrackPlaylistCallbackName"},"playlist-validator":{concrete:GV.ServeandtrackPlaylistValidator},"playlist-data-handler":{concrete:GV.ServeandtrackPlaylistDataHandler},"video-filters":{deps:["video-shuffler","capability-filter"],init:function(a,b){return new GV.VideoFilters([a,b])}},"video-shuffler":{deps:["storage"],init:function(a){return new GV.VideoShuffler(a)}},"capability-filter":{deps:["player-support-detector",
"flash-capability-detector","html5-capability-detector"],init:function(a,b,c){a=new GV.CapabilityFilter(a);a.addCapabilityDetector(GV.PlayerType.CUSTOM_TEMPLATE,b);a.addCapabilityDetector(GV.PlayerType.FLASH,b);a.addCapabilityDetector(GV.PlayerType.HTML5,c);return a}},presenter:{deps:["presentation-strategy-selector","presentation-strategy-factory","diagnostics-client"],init:function(a,b,c){a=new GV.Presenter(a,b);a.setDiagnosticsClient(c);return a}},"presentation-strategy-selector":{concrete:GV.PresentationStrategySelector},
"presentation-strategy-factory":{deps:["player-presentation-strategy-init","fallback-presentation-strategy-init","error-presentation-strategy-init","blacklisted-presentation-strategy-init","no-videos-presentation-strategy-init"],init:function(a,b,c,d,e){var f=new GV.Utils.SimpleObjectFactory(true);f.addDefinition(GV.PresentationStrategyType.PLAYER,a);f.addDefinition(GV.PresentationStrategyType.FALLBACK,b);f.addDefinition(GV.PresentationStrategyType.ERROR,c);f.addDefinition(GV.PresentationStrategyType.BLACKLISTED,
d);f.addDefinition(GV.PresentationStrategyType.NO_VIDEOS,e);return f}},"player-presentation-strategy-init":{deps:["landing-page","player-selector","player-factory","video-promoter","player-observers"],init:function(a,b,c,d,e){return function(){return new GV.PlayerPresentationStrategy(a,b,c,d,e)}}},"fallback-presentation-strategy-init":{deps:["landing-page","fallback-service","fallback-service-validator","html-snippet-embedder","fallback-observers"],init:function(a,b,c,d,e){return function(){return new GV.FallbackPresentationStrategy(a,
b,c,d,e)}}},"no-videos-presentation-strategy-init":{deps:"landing-page",init:function(a){return function(){return new GV.NoVideosPresentationStrategy(a)}}},"blacklisted-presentation-strategy-init":{deps:"landing-page",init:function(a){return function(){return new GV.BlacklistedPresentationStrategy(a)}}},"error-presentation-strategy-init":{deps:"landing-page",init:function(a){return function(){return new GV.ErrorPresentationStrategy(a)}}},"landing-page":{deps:["element-detector","element-handler-factory"],
init:function(a,b){return new GV.LandingPage(a,b)}},"element-detector":{deps:"element-attribute-name",init:function(a){return new GV.AttributeElementDetector(a)}},"element-attribute-name":{config:"elementAttributeName"},"element-handler-factory":{deps:["fallback-element-handler-init","message-element-handler-init","player-element-handler-init","thumbnails-element-handler-init","title-element-handler-init"],init:function(a,b,c,d,e){var f=new GV.Utils.SimpleObjectFactory;f.addDefinition(GV.LayoutElementType.FALLBACK,
a);f.addDefinition(GV.LayoutElementType.ERROR,b);f.addDefinition(GV.LayoutElementType.PLAYER,c);f.addDefinition(GV.LayoutElementType.THUMBNAILS,d);f.addDefinition(GV.LayoutElementType.TITLE,e);return f}},"fallback-element-handler-init":{value:function(){return new GV.FallbackElementHandler}},"message-element-handler-init":{value:function(){return new GV.ErrorElementHandler}},"player-element-handler-init":{value:function(){return new GV.PlayerElementHandler}},"thumbnails-element-handler-init":{value:function(){return new GV.ThumbnailsElementHandler}},
"title-element-handler-init":{value:function(){return new GV.TitleElementHandler}},"diagnostics-client":{deps:["diagnostics-service","diagnostics-data-validator"],init:function(a,b){return new GV.DiagnosticsClient(a,b)}},"diagnostics-service":{deps:["ajax-client","external-service-request-init","diagnostics-url","diagnostics-callback-name"],init:function(a,b,c,d){a=new GV.External.Service(a,b,GV.External.DataFormat.HTML,[GV.External.RequestType.HTML]);a.setUrl(c);a.setCallbackName(d);return a}},"diagnostics-service-url":{config:"diagnosticsServiceUrl"},
"diagnostics-url":{deps:"diagnostics-service-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},"diagnostics-callback-name":{config:"diagnosticsServiceCallbackName"},"diagnostics-data-validator":{concrete:GV.DiagnosticsServiceDataValidator},"player-selector":{deps:["player-support-detector","player-priority-resolver","flash-capability-detector","html5-capability-detector"],init:function(a,b,c,d){a=new GV.PlayerSelector(a,b);a.addCapabilityDetector(GV.PlayerType.CUSTOM_TEMPLATE,c);
a.addCapabilityDetector(GV.PlayerType.FLASH,c);a.addCapabilityDetector(GV.PlayerType.HTML5,d);return a}},"player-support-detector":{concrete:GV.PlayerSupportDetector},"player-priority-resolver":{concrete:GV.PlayerPriorityResolver},"flash-capability-detector":{deps:"min-flash-version",init:function(a){return new GV.FlashCapabilityDetector(a)},singleton:true},"min-flash-version":{config:"minFlashVersion"},"html5-capability-detector":{concrete:GV.Html5CapabilityDetector,singleton:true},"video-promoter":{concrete:GV.VideoPromoter},
"player-factory":{deps:["custom-template-init","flash-player-init","html-player-init"],init:function(a,b,c){var d=new GV.Utils.SimpleObjectFactory(true);d.addDefinition(GV.PlayerType.CUSTOM_TEMPLATE,a);d.addDefinition(GV.PlayerType.FLASH,b);d.addDefinition(GV.PlayerType.HTML5,c);return d}},"custom-template-init":{deps:["custom-template-service","html-snippet-embedder","custom-template-service-validator","custom-template-placeholder-replacer"],init:function(a,b,c,d){return function(){return new GV.CustomTemplate(a,
b,c,d)}},singleton:true},"custom-template-service":{deps:["ajax-client","external-service-request-init","custom-template-url","custom-template-service-callback-name"],init:function(a,b,c,d){a=new GV.External.Service(a,b,GV.External.DataFormat.HTML,[GV.External.RequestType.HTML,GV.External.RequestType.JSONP]);a.setUrl(c);a.setCallbackName(d);return a}},"custom-template-url":{deps:"custom-template-service-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},"custom-template-service-url":{config:"customTemplateServiceUrl"},
"custom-template-service-callback-name":{config:"customTemplateServiceCallbackName"},"html-snippet-embedder":{concrete:GV.HtmlSnippetEmbedder},"custom-template-service-validator":{concrete:GV.CustomTemplateValidator},"custom-template-placeholder-replacer":{concrete:GV.CustomTemplatePlaceholderReplacer},"flash-player-init":{deps:["flash-player-embedder","flash-player-info","flash-params-formatter","flashvars-formatter"],init:function(a,b,c,d){return function(){var e=new GV.FlashPlayer(a,b);e.setParamsFormatter(c);
e.setFlashVarsFormatter(d);return e}},singleton:true},"flash-player-embedder":{deps:["flash-player-url"],init:function(a){return new GV.FlashEmbedder(a)}},"flash-player-url":{config:"flashPlayerUrl"},"flash-params-formatter":{concrete:GV.FlashParamsFormatter},"flashvars-formatter":{deps:["location-group-url-parser","flash-player-skin-path","flash-player-plugin-path","flash-player-playlist-path"],init:function(a,b,c,d){a=new GV.FlashVarsFormatter(a);a.setSkinPath(b);a.setPluginPath(c);a.setPlaylistPath(d);
return a}},"location-group-url-parser":{concrete:GV.LocationGroupUrlParser},"flash-player-skin-path":{config:"flashPlayerSkinPath"},"flash-player-plugin-path":{config:"flashPlayerPluginPath"},"flash-player-playlist-path":{config:"flashPlayerPlaylistPath"},"flash-player-info":{deps:"flash-player-version",init:function(a){return new GV.Data.PlayerInfo(GV.PlayerType.FLASH,a)}},"flash-player-version":{config:"flashPlayerVersion"},"html-player-init":{deps:["html-player-embedder","html-player-info"],init:function(a,
b){return function(){return new GV.HtmlPlayer(a,GV.Data.Privacy,b)}},singleton:true},"html-player-embedder":{deps:"html-player-skin",init:function(a){return new GV.HtmlPlayerEmbeder(a)}},"html-player-skin":{concrete:GV.Skin},"html-player-info":{deps:"html-player-version",init:function(a){return new GV.Data.PlayerInfo(GV.PlayerType.HTML5,a)}},"html-player-version":{config:"htmlPlayerVersion"},"player-observers":{deps:["gv-tracker","third-party-tracker","player-events-recorder"],init:function(a,b,c){return[a,
b,c]}},"fallback-observers":{deps:["gv-tracker"],init:function(a){return[a]}},"gv-tracker":{deps:"gvTracking-service",init:function(a){return new GV.GvTracker(a)}},"gvTracking-service":{deps:["ping-client","external-service-request-init","ping-url"],init:function(a,b,c){a=new GV.External.Service(a,b,GV.External.DataFormat.NONE,[GV.External.RequestType.PING]);a.setUrl(c);return a}},"ping-client":{concrete:GV.External.PingClient,singleton:true},"ping-url":{deps:"serveandtrack-ping-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},
"serveandtrack-ping-url":{config:"serveandtrackPingUrl"},"third-party-tracker":{deps:"third-party-tracking-service",init:function(a){return new GV.ThirdPartyTracker(a)}},"third-party-tracking-service":{deps:["ping-client","third-party-tracking-request-init"],init:function(a,b){return new GV.External.Service(a,b,GV.External.DataFormat.NONE,[GV.External.RequestType.PING])}},"third-party-tracking-request-init":{deps:"tracking-url-placeholder-replacer",init:function(a){return function(){return new GV.ThirdPartyTrackingRequest(a)}},
singleton:true},"tracking-url-placeholder-replacer":{concrete:GV.TrackingUrlPlaceholderReplacer},"player-events-recorder":{deps:["storage"],init:function(a){return new GV.PlayerEventsRecorder(a)}},storage:{deps:["kizzy","kizzy-config"],init:function(a,b){return new GV.Storage(a,b)},singleton:true},kizzy:{deps:["kizzy-config"],init:function(a){return kizzy(a.ns)}},"kizzy-config":{value:GV.KizzyConfig},"fallback-service":{deps:["ajax-client","external-service-request-init","fallback-url","fallback-service-callback-name"],
init:function(a,b,c,d){a=new GV.External.Service(a,b,GV.External.DataFormat.HTML,[GV.External.RequestType.HTML,GV.External.RequestType.JSONP]);a.setUrl(c);a.setCallbackName(d);return a}},"fallback-url":{deps:"fallback-service-url",init:function(a){return new GV.External.PlaceholderedUrl(a)}},"fallback-service-url":{config:"fallbackServiceUrl"},"fallback-service-callback-name":{config:"fallbackServiceCallbackName"},"fallback-service-validator":{concrete:GV.FallbackServiceValidator}});GV.DependencyInjectionContainer.setConfiguration(GV.applicationConfig);
var playerContainer=GV.DependencyInjectionContainer.getInstance("player-container");playerContainer.init();
